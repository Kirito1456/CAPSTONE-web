{%load static%}
<title>{% block title %}Patient Data{% endblock %}</title>

{% block styles%} 
<link rel="stylesheet" href="{% static 'css/patient_personal_informations.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<style>
    body {
        font-family: 'Arial', sans-serif;
    }
    .close {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 20px;
        cursor: pointer;
    }
    
    #update-with-new-order {
        display: flex;
        justify-content: space-between;
        margin: 15px;
    }
    
    #remove-medication-button {
        margin-top: 10px;
    }
    
    #remove-medication-button a {
        background-color: red;
        color: white;
        padding: 3px;
        border-radius: 5px;
        font-size: 12px;
    }
    
    #add-medication-button a, #submit-medication-button a {
        background-color: green;
        color: white;
        padding: 3px;
        border-radius: 5px;
        font-size: 12px;
    }
    
    #table-header{
       font-weight: bold; 
       background-color: #4280c7; 
       color: white; 
       padding: 5px;
       margin: 5px;
       border-radius: 5px;
    }

    #table-body{
        padding: 5px;
        margin: 5px;
        border-radius: 5px;
     }

    #medication-list{
        display: flex; 
        flex-direction: column;
    }
    .form-row {
        display: flex;
        flex-wrap: wrap;
    }
    
    .form-group {
        margin-right: 20px; /* Adjust spacing between form groups */
    }
    
    #view-notes-history, #view-vitalsigns-history {
        display: inline-block;
        padding: 5px;
        font-size: 12px;
        background-color: #4280c7;
        color: #fff;
        text-decoration: none;
        border: none;
        border-radius: 5px; 
        cursor: pointer;
        margin: 10px;
    }
    
    #view-notes-history:hover, #view-vitalsigns-history:hover {
        background-color: #0056b3;
    }

    .button_patient {
        display: inline-block;
        padding: 5px;
        font-size: 12px;
        background-color: #4280c7;
        color: #fff;
        text-decoration: none;
        border: none;
        border-radius: 5px; 
        cursor: pointer;
        margin: 10px;
    }
    
    .button_patient:hover {
        background-color: #0056b3;
    }

    .form_container{
        border: 1px solid #ccc;
        padding: 5px;
        width: fit-content;
        margin: 5px;
        border-radius: 5px;
    }

    .container-big {
        display: flex;
        align-items: center; 
        flex-wrap: wrap; 
    }

    .container-small {
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        margin-bottom: 30px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .container-inside {
        padding: 10px;
    }
    
    #patient-info, #consultation-notes-container, #diagnostic-tests-container, #vital-signs-container, #progress-notes-container {
        display: flex;
        align-items: center; 
        flex-wrap: wrap; 
    }
    
    #personal-information, #progress-notes-box {
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        margin-bottom: 30px;
        width: 100%;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    #info_container{
        display: flex;
    }

    #progress-note{
        justify-content: space-between;
        padding: 10px;
    }

    #info_box{
        padding: 10px;
        flex: 1;
    }
 
    #button_box{
        padding: 10px;
        flex: 1;
        
    }   

    .head{
        text-align: center;
        font-weight: bold;
    
        font-size: 14px;
    
        padding-bottom: 5px;
        padding-top: 5px;
        background-color: #5c7c89;
        color: #fff;
    
        margin-bottom: 10px;
    }

    #vital-signs-box {
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        margin-bottom: 20px;
        width: 100%;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    #consultation-notes{
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        margin-bottom: 20px;
        width: 100%;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    #diagnostic-tests{
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        margin-bottom: 20px;
        width: 90%;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        
        margin-right: 1%;
    }
    
    
    #head-personal-information {
        text-align: center;
        font-weight: bold;

        font-size: 14px;

        padding-bottom: 5px;
        padding-top: 5px;
        background-color: #5c7c89;
        color: #fff;

        margin-bottom: 10px;
    }

    .modalFinish {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        background-color: #fefefe;
        border: 1px solid #888;
        width: 20%;
        height: 20%;
        padding: 20px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        overflow: auto;
    }
    .modalFinish1 {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        background-color: #fefefe;
        border: 1px solid #888;
        width: 60%;
        height: 60%;
        padding: 20px;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        overflow: auto;
    }
    .modal1 {
        display: none;
        position: fixed;
        z-index: 1000;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.5);
    }
    /* CSS for the modal */
    .modal2 {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    /* Modal content */
    .modal-content2 {
        background-color: #fefefe;
        margin: 15% auto; /* 15% from the top and centered */
        padding: 20px;
        border: 1px solid #888;
        width: 80%; /* Could be more or less, depending on screen size */
        max-width: 600px; /* Set max width to prevent stretching */
        border-radius: 5px;
    }

    #closeModal:hover,
    #closeModal:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
    }
    .modal-content1 {
        background-color: white;
        margin: 20px;
        padding: 20px;
        border: 1px solid #888;
        border-radius: 5px;
        position: absolute;
        top: 50%;
        left: 50%;
        width: 70%;
        transform: translate(-50%, -50%);
    }
    
    .modal-content1 h2 {
        margin-top: 0;
    }
    
    .modal-content1 label {
        display: block;
        margin-bottom: 5px;
    }
    
    .modal-content1 textarea,
    .modal-content1 input[type="text"] {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 3px;
    }
    
    .modal-content1 table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 10px;
    }
    
    .modal-content1 table th,
    .modal-content1 table td {
        padding: 8px;
        border: 1px solid #ccc;
    }
    
    .modal-content1 button {
        padding: 10px 20px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        margin-right: 10px;
    }
    
    .modal-content1 button:last-child {
        margin-right: 0;
        background-color: #ccc;
    }
    
    .close1 {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }
    
    .close1:hover,
    .close1:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
    }
    
    .prescriptions-container {
        display: grid;
        display: flex; 
        flex-direction: column;
        grid-template-columns: repeat(6, 1fr);
        gap: 10px;
        grid-auto-flow: row; /* Ensure rows are stacked */
    }
    
    .prescription-row1 {
        display: grid;
        
        grid-template-columns: repeat(6, 1fr);
        border: 1px solid #ccc;
    }
    
    .cell {
        padding: 5px;
        border: 1px solid #ccc;
    }
    
    .header {
        font-weight: bold;
        background-color: #f0f0f0;
    }
    
</style>
{% endblock styles%}

{% block content %}
<div id = "whole-screen">
    <div id = "side-menu" style="background-color: #334a7c;">
        <div id = "all-info">
            <div id = "user-info"> 
                <div id = "image">
                    <img src="{% static 'logo-color.png' %}" id = "display-photo">
                </div>
                <div id="information">
                    {% for doctor_id, doctor_data in doctors.items %}
                        {% if doctor_data.uid == uid %}
                            <div id="name"> {{ doctor_data.fname }} {{ doctor_data.lname }}</div>
                            <div id="role"> {{ doctor_data.specialization}}</div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            <div id="menu"> 
                <div id="a1"><i class="fas fa-tachometer-alt"></i> <a href="{% url 'DoctorDashboard' %}">Dashboard</a></div>
                <div id="a2"> <i class="far fa-calendar-alt"></i> <a href="{% url 'AppointmentUpcoming' %}">Appointments</a></div>
                <div id="a3" style="font-weight: bold;"><i class="fas fa-user"></i> <a href="{% url 'patient_data_doctor_view' %}">Patients</a></div>
                <div id="a5"><i class="far fa-envelope"></i> <a href="">Message</a></div>
                <div id="a6"><i class="far fa-user-circle"></i> <a href="">Profile</a></div>
                <div id="a7"><i class="fas fa-cog"></i> <a href="">Settings</a></div>
                <div id="a4"><i class="fas fa-sign-out-alt"></i> <a href="{% url 'logout' %}"> Logout</a></div>

            </div>
        </div>
    </div>
    <div id = "other-side">
        <div id = "title">
            <div id = "left">
                <button id="backButton">Back</button>
            </div>
        </div>
        <div id = "patient-info">
            {% for chosenPatientData_id, chosenPatientData_data in chosenPatientData.items %}
            <div id = "personal-information">
                <div id = "head-personal-information">Personal Information</div>
                <div id="info_container">
                    <div id="info_box">
                        <div id = "first">
                            <div id = "fname-label">Name:</div>
                            <div id = "fname">{{ chosenPatientData_data.fname }} {{ chosenPatientData_data.lname }}</div>
                        </div>
                        
                        <div id = "gender">
                            <div id = "gender-label">Sex:</div>
                            <div id = "gender-view">{{ chosenPatientData_data.gender }}</div>
                        </div>

                        <div id = "bday">
                            <div id = "bday-label">Birthday:</div>
                            <div id = "birthday">{{ chosenPatientData_data.bday }}</div>
                        </div>

                        {% for chosenPatientDatas_id, chosenPatientDatas_data in chosenPatientDatas.items %}
                            <div id="last">
                                <div id="lname-label">Status:</div>
                                <div id="lname">{{ chosenPatientDatas_data.status }}</div>
                            </div>
                            
                            {% if chosenPatientDatas_data.status == 'Outpatient' %}
                                <button id="endtransaction" onclick="openAppointmentModal()">Finish Appointment</button>
                                <form method="post">
                                    {% csrf_token %}
                                    <button type="submit" id="admitButton" name="admitButton" onclick="confirmAdmit()">Admit Patient</button>
                                </form>
                            {% elif chosenPatientDatas_data.status == 'Inpatient' %}
                                {% for chosenPatientConsulNotes_id, chosenPatientConsulNotes_data in chosenPatientConsulNotes.items %}
                                    <div id="last">
                                        <div id="lname-label">Diagnosis:</div>
                                        <div id="lname">{{ chosenPatientConsulNotes_data.diagnosis }}</div>
                                    </div>
                                {% endfor %}
                                <button id="endtransaction" onclick="openDischargeModal()">Discharge</button>
                            {% endif %}

                        {% endfor %}

                    </div>
                    <div id="button-box">

                        <div id="appModal" class="modalFinish" style="display: none;">
                            <h2>Finish Appointment</h2>
                            <form id="reschedule-form" method="post" action="{% url 'followup_appointment' %}">
                            {% csrf_token %}
                                <input type="checkbox" id="followupCheckbox" name="followupCheckbox" onchange="toggleFollowup()">
                                <label for="followupCheckbox">Follow-Up Checkup</label>
                                <div id="followupDiv" style="display: none;">
                                    {% for appointmentsched_id, appointmentsched_data in appointmentschedule.items %}
                                        {% if appointmentsched_data.uid == uid %}
                                            <div class="form-row">
                                                <div class="form-group">
                                                    <label for="suggested-date" style="margin-top: 5px; font-weight: bold;">Suggested Schedule:</label>
                                                    <div name="three_days_after" style="margin-top: 5px;">{{ three_days_after }}</div>
                                                    <label for="suggested-time" style="margin-top: 5px; font-weight: bold;">Suggested Time:</label>
                                                    <div name="followup_time" style="margin-top: 5px;">{{ time_early }}</div><br>
                                                </div>
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </form>

                            <form method="post">
                                {% csrf_token %}
                                <button id="endAppointment" name="endAppointment">End Appointment</button>
                            </form>
                        
                        
                            <div id="followupDropdown" style="display: none;">
                                <div id="myModal" class="modalFinish1">
                                    <div class="modal-content">
                                        <span id="closeModalButton1">&times;</span>
                                        <h2>Follow Up Appointment</h2>
                                        <form id="reschedule-form" method="post" action="{% url 'followup_appointment' %}">
                                            {% csrf_token %}
                                            <label for="suggested-time">Suggested Schedule:</label>
                                            {% comment %} <select id="selected_appointment_date" name="selected_appointment_date" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                                                {% for next_available_date in next_available_dates %}
                                                    <option value="{{ next_available_date }}">{{ next_available_date }}</option>
                                                {% endfor %}
                                            </select><br> {% endcomment %}
                                            <select id="selected_appointment_date" name="selected_appointment_date" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                                                <option value="one_week" name="selected_time">1 week</option>
                                                <option value="two_weeks" name="selected_time">2 weeks</option>
                                                <option value="three_weeks" name="selected_time">3 weeks</option>
                                                <option value="one_month" name="selected_time">1 month</option>
                                            </select><br>
                                            <button type="submit" id="appID" name="appID" value="{{ chosenPatientData_id }}">Appointment Finished</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button onclick="toggleBiometricInfo()">Biometric Information</button>
                        <div id="biometric-info" style="display: none;">
                            {% for chosenPatientDatas_id, chosenPatientDatas_data in chosenPatientDatas.items %}
                            <div id = "blood-type">
                                <div id = "blood-type-label">Blood Type:</div>
                                <div id = "blood-type-view">{{ chosenPatientDatas_data.bloodtype }}</div>
                            </div>
                            <div id = "height">
                                <div id = "height-label">Height: </div>
                                <div id = "height-view">{{ chosenPatientDatas_data.height }} cm</div>
                            </div><div id = "weight">
                                <div id = "weight-label">Weight:</div>
                                <div id = "weight-view">{{ chosenPatientDatas_data.weight }} kg</div>
                            </div>
                            {% endfor %}
                        </div>

                        <button onclick="toggleContactInfo()">Contact Information</button>
                        <div id="contact-details" style="display: none;">
                            <div id="address">
                                <div id="address-label">Address:</div>
                                <div id="address-view">{{ chosenPatientData_data.address }}</div>
                            </div>
                            <div id="phone">
                                <div id="phone-number-label">Phone Number:</div>
                                <div id="phone-number">{{ chosenPatientData_data.cnumber }}</div>
                            </div>
                            <div id="email">
                                <div id="email-label">E-mail Address:</div>
                                <div id="e-mail">{{ chosenPatientData_data.email }}</div>
                            </div>
                        </div>
                        <button><a href="{% url 'patient_medical_history' %}?chosenPatient={{chosenPatientData_data.uid}}">Medical History</a></button>
                        <button><a href = "{% url 'view_treatment_plan_all' %}?chosenPatient={{chosenPatientData_data.uid}}">Treatment Plan</a></button>

                        {% for chosenPatientConsulNotes_id, chosenPatientConsulNotes_data in chosenPatientConsulNotes.items %}
                            {% if chosenPatientConsulNotes_data.diagnosis %}
                                <button><a href="{% url 'outpatient_medication_order' %}?chosenPatient={{chosenPatientData_data.uid}}&diagnosis={{chosenPatientConsulNotes_data.diagnosis}}">Make Order</a></button>
                            {% endif %}
                        {% endfor %}

                    </div>
                
                </div>
                </div>
            {% endfor %}
        </div>

        <div id="whole-container" style="display: flex; flex-direction: row">
            <div id="left-container">
            {% comment %} Consultation Notes {% endcomment %}
                <div class = "container-big" style="margin-right: 30px;">
                    {% for chosenPatientData_id, chosenPatientData_data in chosenPatientData.items %}
                    <div class = "container-small" style="width: 300px;">
                        <div class="head">Consultation Notes</div >
                            <div class="container-inside">
                                <button id="chiefComplaintButton">Chief Complaint</button>
                                <form method='post'>
                                    {% csrf_token %}
                                    <div id="chiefComplaintArea" style="display: none;">
                                        {% if chosenPatientConsulNotes %}
                                            {% for chosenPatientConsulNotes_id, chosenPatientConsulNotes_data in chosenPatientConsulNotes.items %}
                                                <textarea id="chiefComplaintText" rows="4" cols="35" placeholder="Enter chief complaint..." 
                                                name="chiefComplaint">{{ chosenPatientConsulNotes_data.chiefComplaint }}</textarea>
                                            {% endfor %}
                                        {% else %}
                                            <textarea id="chiefComplaintText" rows="4" cols="35" placeholder="Enter chief complaint..." 
                                            name="chiefComplaint"></textarea>
                                        {% endif %}
                                        <button id="saveChiefComplaintButton" type="submit" name="complaintButton" value={{ chosenPatientData_id }} >Save</button>
                                        <button id="cancelChiefComplaintButton">Cancel</button>
                                    </div>
                                </form>

                                <div id="ros">
                                    <button id="reviewOfSystemsButton">Review of Systems</button>
                                    <div id="reviewOfSystemsModal" class="modal" style="display: none;">
                                        <div class="modal-content">
                                            <h2>Review of Systems</h2>
                                            <form id="reviewOfSystemsForm" method='post' >
                                                {% csrf_token %}
                                                {% if chosenPatientConsulNotes %}
                                                    {% for chosenPatientConsulNotes_id, chosenPatientConsulNotes_data in chosenPatientConsulNotes.items %}
                                                        <div class="column">
                                                            <p>Skin</p>
                                                                <input type="checkbox" name="skin_conditions" value="Rashes" {% if 'Rashes' in chosenPatientConsulNotes_data.review_of_systems.skin %} checked {% endif %}><label>Rashes</label><br>
                                                                <input type="checkbox" name="skin_conditions" value="Itching" {% if 'Itching' in chosenPatientConsulNotes_data.review_of_systems.skin %} checked {% endif %}><label>Itching</label><br>
                                                                <input type="checkbox" name="skin_conditions" value="Change in Hair or Nails" {% if 'Change in Hair or Nails' in chosenPatientConsulNotes_data.review_of_systems.skin %} checked {% endif %}><label>Change in Hair or Nails</label><br>
                                                            <p>Head</p>
                                                                <input type="checkbox" name="head_conditions" value="Headaches" {% if 'Headaches' in chosenPatientConsulNotes_data.review_of_systems.head %} checked {% endif %}><label>Headaches</label><br>
                                                                <input type="checkbox" name="head_conditions" value="Head Injury" {% if 'Head Injury' in chosenPatientConsulNotes_data.review_of_systems.head %} checked {% endif %}><label>Head Injury</label><br>
                                                            <p>Eyes</p>
                                                                <input type="checkbox" name="eye_conditions" value="Glasses or Contacts" {% if 'Glasses or Contacts' in chosenPatientConsulNotes_data.review_of_systems.eyes %} checked {% endif %}><label>Glasses or Contacts</label><br>
                                                                <input type="checkbox" name="eye_conditions" value="Change in Vision" {% if 'Change in Vision' in chosenPatientConsulNotes_data.review_of_systems.eyes %} checked {% endif %}><label>Change in Vision</label><br>
                                                                <input type="checkbox" name="eye_conditions" value="Eye Pain" {% if 'Eye Pain' in chosenPatientConsulNotes_data.review_of_systems.eyes %} checked {% endif %}><label>Eye Pain</label><br>
                                                                <input type="checkbox" name="eye_conditions" value="Double Vision" {% if 'Double Vision' in chosenPatientConsulNotes_data.review_of_systems.eyes %} checked {% endif %}><label>Double Vision</label><br>
                                                                <input type="checkbox" name="eye_conditions" value="Flashing Lights" {% if 'Flashing Lights' in chosenPatientConsulNotes_data.review_of_systems.eyes %} checked {% endif %}><label>Flashing Lights</label><br>
                                                                <input type="checkbox" name="eye_conditions" value="Glaucoma/Cataracts" {% if 'Glaucoma/Cataracts' in chosenPatientConsulNotes_data.review_of_systems.eyes %} checked {% endif %}><label>Glaucoma/Cataracts</label><br>
                                                            <p>Ears</p>
                                                                <input type="checkbox" name="ear_conditions" value="Change in Hearing" {% if 'Change in Hearing' in chosenPatientConsulNotes_data.review_of_systems.ear %} checked {% endif %}><label>Change in Hearing</label><br>
                                                                <input type="checkbox" name="ear_conditions" value="Ear Pain" {% if 'Ear Pain' in chosenPatientConsulNotes_data.review_of_systems.ear %} checked {% endif %}><label>Ear Pain</label><br>
                                                                <input type="checkbox" name="ear_conditions" value="Ear Discharge" {% if 'Ear Discharge' in chosenPatientConsulNotes_data.review_of_systems.ear %} checked {% endif %}><label>Ear Discharge</label><br>
                                                                <input type="checkbox" name="ear_conditions" value="Ringing" {% if 'Ringing' in chosenPatientConsulNotes_data.review_of_systems.ear %} checked {% endif %}><label>Ringing</label><br>
                                                                <input type="checkbox" name="ear_conditions" value="Dizziness" {% if 'Dizziness' in chosenPatientConsulNotes_data.review_of_systems.ear %} checked {% endif %}><label>Dizziness</label><br>
                                                            <p>Nose/Sinuses</p>
                                                                <input type="checkbox" name="nose_conditions" value="Nose Bleeds" {% if 'Nose Bleeds' in chosenPatientConsulNotes_data.review_of_systems.nose %} checked {% endif %}><label>Nose Bleeds</label><br>
                                                                <input type="checkbox" name="nose_conditions" value="Nasal Stuffiness" {% if 'Nasal Stuffiness' in chosenPatientConsulNotes_data.review_of_systems.nose %} checked {% endif %}><label>Nasal Stuffiness</label><br>
                                                                <input type="checkbox" name="nose_conditions" value="Frequent Colds" {% if 'Frequent Colds' in chosenPatientConsulNotes_data.review_of_systems.nose %} checked {% endif %}><label>Frequent Colds</label><br>
                                                            <p>Allergies</p>
                                                                <input type="checkbox" name="allergy_conditions" value="Frequent Colds" {% if 'Frequent Colds' in chosenPatientConsulNotes_data.review_of_systems.allergy %} checked {% endif %}><label>Hives</label><br>
                                                                <input type="checkbox" name="allergy_conditions" value="Swelling of Lips or Tongues" {% if 'Swelling of Lips or Tongues' in chosenPatientConsulNotes_data.review_of_systems.allergy %} checked {% endif %}><label>Swelling of Lips or Tongues</label><br>
                                                                <input type="checkbox" name="allergy_conditions" value="Hay Fever" {% if 'Hay Fever' in chosenPatientConsulNotes_data.review_of_systems.allergy %} checked {% endif %}><label>Hay Fever</label><br>
                                                                <input type="checkbox" name="allergy_conditions" value="Asthma" {% if 'Asthma' in chosenPatientConsulNotes_data.review_of_systems.allergy %} checked {% endif %}><label>Asthma</label><br>
                                                                <input type="checkbox" name="allergy_conditions" value="Eczema/Sensitive" {% if 'Eczema/Sensitive' in chosenPatientConsulNotes_data.review_of_systems.allergy %} checked {% endif %}><label>Eczema/Sensitive</label><br>
                                                            <p>Mouth/Throat</p>
                                                                <input type="checkbox" name="mouth_conditions" value="Bleeding Gums" {% if 'Bleeding Gums' in chosenPatientConsulNotes_data.review_of_systems.mouth %} checked {% endif %}><label>Bleeding Gums</label><br>
                                                                <input type="checkbox" name="mouth_conditions" value="Sore Tongue" {% if 'Sore Tongue' in chosenPatientConsulNotes_data.review_of_systems.mouth %} checked {% endif %}><label>Sore Tongue</label><br>
                                                                <input type="checkbox" name="mouth_conditions" value="Sore Throat" {% if 'Sore Throat' in chosenPatientConsulNotes_data.review_of_systems.mouth %} checked {% endif %}><label>Sore Throat</label><br>
                                                                <input type="checkbox" name="mouth_conditions" value="Hoarseness" {% if 'Hoarseness' in chosenPatientConsulNotes_data.review_of_systems.mouth %} checked {% endif %}><label>Hoarseness</label><br>
                                                            <p>Neck</p>
                                                                <input type="checkbox" name="neck_conditions" value="Lumps" {% if 'Lumps' in chosenPatientConsulNotes_data.review_of_systems.neck %} checked {% endif %}><label>Lumps</label><br>
                                                                <input type="checkbox" name="neck_conditions" value="Swollen Glands" {% if 'Swollen Glands' in chosenPatientConsulNotes_data.review_of_systems.neck %} checked {% endif %}><label>Swollen Glands</label><br>
                                                                <input type="checkbox" name="neck_conditions" value="Goiter" {% if 'Goiter' in chosenPatientConsulNotes_data.review_of_systems.neck %} checked {% endif %}><label>Goiter</label><br>
                                                                <input type="checkbox" name="neck_conditions" value="Stiffness" {% if 'Stiffness' in chosenPatientConsulNotes_data.review_of_systems.neck %} checked {% endif %}><label>Stiffness</label><br>
                                                            <p>Breast</p>
                                                                <input type="checkbox" name="breast_conditions" value="Lumps" {% if 'Lumps' in chosenPatientConsulNotes_data.review_of_systems.breast %} checked {% endif %}><label>Lumps</label><br>
                                                                <input type="checkbox" name="breast_conditions" value="Pain" {% if 'Pain' in chosenPatientConsulNotes_data.review_of_systems.breast %} checked {% endif %}><label>Pain</label><br>
                                                                <input type="checkbox" name="breast_conditions" value="Nipple Discharge" {% if 'Nipple Discharge' in chosenPatientConsulNotes_data.review_of_systems.breast %} checked {% endif %}><label>Nipple Discharge</label><br>
                                                                <input type="checkbox" name="breast_conditions" value="BSE" {% if 'BSE' in chosenPatientConsulNotes_data.review_of_systems.breast %} checked {% endif %}><label>BSE</label><br>
                                                            <p>Respiratory/Cardiac</p>
                                                                <input type="checkbox" name="cardiac_conditions" value="Shortness of Breath" {% if 'Shortness of Breath' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Shortness of Breath</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="Cough" {% if 'Cough' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Cough</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="Production of Phlegm" {% if 'Production of Phlegm' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Production of Phlegm</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="Wheezing" {% if 'Wheezing' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Wheezing</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="Coughing up Blood" {% if 'Coughing up Blood' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Coughing up Blood</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="Chest Pain" {% if 'Chest Pain' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Chest Pain</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="Fever" {% if 'Fever' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Fever</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="Night Sweats" {% if 'Night Sweats' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Night Sweats</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="BSE" {% if 'BSE' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Swelling in Hands/Feet</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="Swelling in Hands/Feet" {% if 'Swelling in Hands/Feet' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Blue Fingers/Toes</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="High Blood Pressure" {% if 'High Blood Pressure' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>High Blood Pressure</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="Heart Murmur" {% if 'Heart Murmur' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Heart Murmur</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="HX of Heart Medication" {% if 'HX of Heart Medication' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>HX of Heart Medication</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="Bronchities/Emphysema" {% if 'Bronchities/Emphysema' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Bronchities/Emphysema</label><br>
                                                                <input type="checkbox" name="cardiac_conditions" value="Rheumatic Heart Disease" {% if 'Rheumatic Heart Disease' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Rheumatic Heart Disease</label><br>
                                                        </div>
                                                        <div class="column">
                                                            <p>Gastrointestinal</p>
                                                                <input type="checkbox" name="gastro_conditions" value="Change in Appetite/Weight" {% if 'Change in Appetite/Weight' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Change in Appetite/Weight</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Problems Swallowing" {% if 'Problems Swallowing' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Problems Swallowing</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Nausea" {% if 'Nausea' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Nausea</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Heartburn" {% if 'Heartburn' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Heartburn</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Vomiting" {% if 'Vomiting' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Vomiting</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Vomiting Blood" {% if 'Vomiting Blood' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Vomiting Blood</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Constipation" {% if 'Constipation' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Constipation</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Diarrhea" {% if 'Diarrhea' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Diarrhea</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Change in Bowel Habits" {% if 'Change in Bowel Habits' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Change in Bowel Habits</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Abdominal Pain" {% if 'Abdominal Pain' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Abdominal Pain</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Excessive Belching" {% if 'Excessive Belching' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Excessive Belching</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Excessive Flatus" {% if 'Excessive Flatus' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Excessive Flatus</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Yellow color of Skin" {% if 'Yellow color of Skin' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Yellow color of Skin</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Food Intolerance" {% if 'Food Intolerance' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Food Intolerance</label><br>
                                                                <input type="checkbox" name="gastro_conditions" value="Rectal Bleeding/Hemorrhoids" {% if 'Rectal Bleeding/Hemorrhoids' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Rectal Bleeding/Hemorrhoids</label><br>
                                                            <p>Urinary</p>
                                                                <input type="checkbox" name="urinary_conditions" value="Difficulty in Urinaition" {% if 'Difficulty in Urinaition' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Difficulty in Urinaition</label><br>
                                                                <input type="checkbox" name="urinary_conditions" value="Pain or buring on urination" {% if 'Pain or buring on urination' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Pain or buring on urination</label><br>
                                                                <input type="checkbox" name="urinary_conditions" value="Frequent urination at night" {% if 'Frequent urination at night' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Frequent urination at night</label><br>
                                                                <input type="checkbox" name="urinary_conditions" value="Urgent need to urinate" {% if 'Urgent need to urinate' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Urgent need to urinate</label><br>
                                                                <input type="checkbox" name="urinary_conditions" value="Incontinence of urine" {% if 'Incontinence of urine' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Incontinence of urine</label><br>
                                                                <input type="checkbox" name="urinary_conditions" value="Dribbling" {% if 'Dribbling' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Dribbling</label><br>
                                                                <input type="checkbox" name="urinary_conditions" value="Decreased urine stream" {% if 'Decreased urine stream' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Decreased urine stream</label><br>
                                                                <input type="checkbox" name="urinary_conditions" value="Blood in urine" {% if 'Blood in urine' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Blood in urine</label><br>
                                                                <input type="checkbox" name="urinary_conditions" value="UTI/Stones/Prostate Infection" {% if 'UTI/Stones/Prostate Infection' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>UTI/Stones/Prostate Infection</label><br>
                                                        </div>
                                                        <div class="column">
                                                            <p>Peripheral Vascular</p>
                                                                <input type="checkbox" name="pv_conditions" value="Leg cramps" {% if 'Leg cramps' in chosenPatientConsulNotes_data.review_of_systems.pv %} checked {% endif %}><label>Leg cramps</label><br>
                                                                <input type="checkbox" name="pv_conditions" value="Varicose veins" {% if 'Varicose veins' in chosenPatientConsulNotes_data.review_of_systems.pv %} checked {% endif %}><label>Varicose veins</label><br>
                                                                <input type="checkbox" name="pv_conditions" value="Clots in veins" {% if 'Clots in veins' in chosenPatientConsulNotes_data.review_of_systems.pv %} checked {% endif %}><label>Clots in veins</label><br>
                                                            <p>Muscoskeletal</p>
                                                                <input type="checkbox" name="ms_conditions" value="Pain" {% if 'Pain' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Pain</label><br>
                                                                <input type="checkbox" name="ms_conditions" value="Swelling" {% if 'Swelling' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Swelling</label><br>
                                                                <input type="checkbox" name="ms_conditions" value="Stiffness" {% if 'Stiffness' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Stiffness</label><br>
                                                                <input type="checkbox" name="ms_conditions" value="Decrease joint motion" {% if 'Decrease joint motion' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Decrease joint motion</label><br>
                                                                <input type="checkbox" name="ms_conditions" value="Broken bone" {% if 'Broken bone' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Broken bone</label><br>
                                                                <input type="checkbox" name="ms_conditions" value="Serious sprains" {% if 'Serious sprains' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Serious sprains</label><br>
                                                                <input type="checkbox" name="ms_conditions" value="Arthritis" {% if 'Arthritis' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Arthritis</label><br>
                                                                <input type="checkbox" name="ms_conditions" value="Gout" {% if 'Gout' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Gout</label><br>
                                                            <p>Neurologic</p>
                                                                <input type="checkbox" name="neuro_conditions" value="Headaches" {% if 'Headaches' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Headaches</label><br>
                                                                <input type="checkbox" name="neuro_conditions" value="Seizures" {% if 'Seizures' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Seizures</label><br>
                                                                <input type="checkbox" name="neuro_conditions" value="Loss of consciousness/Fainting" {% if 'Loss of consciousness/Fainting' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Loss of consciousness/Fainting</label><br>
                                                                <input type="checkbox" name="neuro_conditions" value="Paralysis" {% if 'Paralysis' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Paralysis</label><br>
                                                                <input type="checkbox" name="neuro_conditions" value="Weakness" {% if 'Weakness' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Weakness</label><br>
                                                                <input type="checkbox" name="neuro_conditions" value="Loss of muscle size" {% if 'Loss of muscle size' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Loss of muscle size</label><br>
                                                                <input type="checkbox" name="neuro_conditions" value="Muscle spasm" {% if 'Muscle spasm' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Muscle spasm</label><br>
                                                                <input type="checkbox" name="neuro_conditions" value="Tremor" {% if 'Tremor' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Tremor</label><br>
                                                                <input type="checkbox" name="neuro_conditions" value="Involuntary movement" {% if 'Involuntary movement' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Involuntary movement</label><br>
                                                                <input type="checkbox" name="neuro_conditions" value="Incoordination" {% if 'Incoordination' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Incoordination</label><br>
                                                                <input type="checkbox" name="neuro_conditions" value="Numbness" {% if 'Numbness' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Numbness</label><br>
                                                                <input type="checkbox" name="neuro_conditions" value="Feeling of pins and needles" {% if 'Feeling of pins and needles' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Feeling of pins and needles</label><br>
                                                            <p>Hematologic</p>
                                                                <input type="checkbox" name="hema_conditions" value="Anemia" {% if 'Anemia' in chosenPatientConsulNotes_data.review_of_systems.hema%} checked {% endif %}><label>Anemia</label><br>
                                                                <input type="checkbox" name="hema_conditions" value="Easy bruising/bleeding" {% if 'Easy bruising/bleeding' in chosenPatientConsulNotes_data.review_of_systems.hema%} checked {% endif %}><label>Easy bruising/bleeding</label><br>
                                                                <input type="checkbox" name="hema_conditions" value="Past tranfusions" {% if 'Past tranfusions' in chosenPatientConsulNotes_data.review_of_systems.hema%} checked {% endif %}><label>Past tranfusions</label><br>
                                                            <p>Endocrine</p>
                                                                <input type="checkbox" name="endo_conditions" value="Abnormal Growth" {% if 'Abnormal Growth' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Abnormal Growth</label><br>
                                                                <input type="checkbox" name="endo_conditions" value="Increased appetite" {% if 'Increased appetite' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Increased appetite</label><br>
                                                                <input type="checkbox" name="endo_conditions" value="Increased thirst" {% if 'Increased thirst' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Increased thirst</label><br>
                                                                <input type="checkbox" name="endo_conditions" value="Increase urine production" {% if 'Increase urine production' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Increase urine production</label><br>
                                                                <input type="checkbox" name="endo_conditions" value="Thyroid trouble" {% if 'Past tranfusions' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Thyroid trouble</label><br>
                                                                <input type="checkbox" name="endo_conditions" value="Heat/cold Intolerance" {% if 'Thyroid trouble' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Heat/cold Intolerance</label><br>
                                                                <input type="checkbox" name="endo_conditions" value="Excessive Sweating" {% if 'Excessive Sweating' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Excessive Sweating</label><br>
                                                                <input type="checkbox" name="endo_conditions" value="Diabetes" {% if 'Diabetes' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Diabetes</label><br>
                                                        </div>
                                                    {% endfor %}
                                                {% else %}
                                                    <div class="column">
                                                        <p>Skin</p>
                                                        <input type="checkbox" name="skin_conditions" value="Rashes"><label>Rashes</label><br>
                                                        <input type="checkbox" name="skin_conditions" value="Itching"><label>Itching</label><br>
                                                        <input type="checkbox" name="skin_conditions" value="Change in Hair or Nails"><label>Change in Hair or Nails</label><br>
                                                        <p>Head</p>
                                                        <input type="checkbox" name="head_conditions" value="Headaches"><label>Headaches</label><br>
                                                        <input type="checkbox" name="head_conditions" value="Head Injury"><label>Head Injury</label><br>
                                                        <p>Eyes</p>
                                                        <input type="checkbox" name="eye_conditions" value="Glasses or Contacts"><label>Glasses or Contacts</label><br>
                                                        <input type="checkbox" name="eye_conditions" value="Change in Vision"><label>Change in Vision</label><br>
                                                        <input type="checkbox" name="eye_conditions" value="Eye Pain"><label>Eye Pain</label><br>
                                                        <input type="checkbox" name="eye_conditions" value="Double Vision"><label>Double Vision</label><br>
                                                        <input type="checkbox" name="eye_conditions" value="Flashing Lights"><label>Flashing Lights</label><br>
                                                        <input type="checkbox" name="eye_conditions" value="Glaucoma/Cataracts"><label>Glaucoma/Cataracts</label><br>
                                                        <p>Ears</p>
                                                        <input type="checkbox" name="ear_conditions" value="Change in Hearing"><label>Change in Hearing</label><br>
                                                        <input type="checkbox" name="ear_conditions" value="Ear Pain"><label>Ear Pain</label><br>
                                                        <input type="checkbox" name="ear_conditions" value="Ear Discharge"><label>Ear Discharge</label><br>
                                                        <input type="checkbox" name="ear_conditions" value="Ringing"><label>Ringing</label><br>
                                                        <input type="checkbox" name="ear_conditions" value="Dizziness"><label>Dizziness</label><br>
                                                        <p>Nose/Sinuses</p>
                                                        <input type="checkbox" name="nose_conditions" value="Nose Bleeds"><label>Nose Bleeds</label><br>
                                                        <input type="checkbox" name="nose_conditions" value="Nasal Stuffiness"><label>Nasal Stuffiness</label><br>
                                                        <input type="checkbox" name="nose_conditions" value="Frequent Colds"><label>Frequent Colds</label><br>
                                                        <p>Allergies</p>
                                                        <input type="checkbox" name="allergy_conditions" value="Frequent Colds"><label>Hives</label><br>
                                                        <input type="checkbox" name="allergy_conditions" value="Swelling of Lips or Tongues"><label>Swelling of Lips or Tongues</label><br>
                                                        <input type="checkbox" name="allergy_conditions" value="Hay Fever"><label>Hay Fever</label><br>
                                                        <input type="checkbox" name="allergy_conditions" value="Asthma"><label>Asthma</label><br>
                                                        <input type="checkbox" name="allergy_conditions" value="Eczema/Sensitive"><label>Eczema/Sensitive</label><br>
                                                        <p>Mouth/Throat</p>
                                                        <input type="checkbox" name="mouth_conditions" value="Bleeding Gums"><label>Bleeding Gums</label><br>
                                                        <input type="checkbox" name="mouth_conditions" value="Sore Tongue"><label>Sore Tongue</label><br>
                                                        <input type="checkbox" name="mouth_conditions" value="Sore Throat"><label>Sore Throat</label><br>
                                                        <input type="checkbox" name="mouth_conditions" value="Hoarseness"><label>Hoarseness</label><br>
                                                        <p>Neck</p>
                                                        <input type="checkbox" name="neck_conditions" value="Lumps"><label>Lumps</label><br>
                                                        <input type="checkbox" name="neck_conditions" value="Swollen Glands"><label>Swollen Glands</label><br>
                                                        <input type="checkbox" name="neck_conditions" value="Goiter"><label>Goiter</label><br>
                                                        <input type="checkbox" name="neck_conditions" value="Stiffness"><label>Stiffness</label><br>
                                                        <p>Breast</p>
                                                        <input type="checkbox" name="breast_conditions" value="Lumps"><label>Lumps</label><br>
                                                        <input type="checkbox" name="breast_conditions" value="Pain"><label>Pain</label><br>
                                                        <input type="checkbox" name="breast_conditions" value="Nipple Discharge"><label>Nipple Discharge</label><br>
                                                        <input type="checkbox" name="breast_conditions" value="BSE"><label>BSE</label><br>
                                                        <p>Respiratory/Cardiac</p>
                                                        <input type="checkbox" name="cardiac_conditions" value="Shortness of Breath"><label>Shortness of Breath</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="Cough"><label>Cough</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="Production of Phlegm"><label>Production of Phlegm</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="Wheezing"><label>Wheezing</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="Coughing up Blood"><label>Coughing up Blood</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="Chest Pain"><label>Chest Pain</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="Fever"><label>Fever</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="Night Sweats"><label>Night Sweats</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="BSE"><label>Swelling in Hands/Feet</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="Swelling in Hands/Feet"><label>Blue Fingers/Toes</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="High Blood Pressure"><label>High Blood Pressure</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="Heart Murmur"><label>Heart Murmur</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="HX of Heart Medication"><label>HX of Heart Medication</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="Bronchities/Emphysema"><label>Bronchities/Emphysema</label><br>
                                                        <input type="checkbox" name="cardiac_conditions" value="Rheumatic Heart Disease"><label>Rheumatic Heart Disease</label><br>
                                                    </div>
                                                    <div class="column">
                                                        <p>Gastrointestinal</p>
                                                        <input type="checkbox" name="gastro_conditions" value="Change in Appetite/Weight"><label>Change in Appetite/Weight</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Problems Swallowing"><label>Problems Swallowing</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Nausea"><label>Nausea</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Heartburn"><label>Heartburn</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Vomiting"><label>Vomiting</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Vomiting Blood"><label>Vomiting Blood</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Constipation"><label>Constipation</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Diarrhea"><label>Diarrhea</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Change in Bowel Habits"><label>Change in Bowel Habits</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Abdominal Pain"><label>Abdominal Pain</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Excessive Belching"><label>Excessive Belching</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Excessive Flatus"><label>Excessive Flatus</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Yellow color of Skin"><label>Yellow color of Skin</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Food Intolerance"><label>Food Intolerance</label><br>
                                                        <input type="checkbox" name="gastro_conditions" value="Rectal Bleeding/Hemorrhoids"><label>Rectal Bleeding/Hemorrhoids</label><br>
                                                        <p>Urinary</p>
                                                        <input type="checkbox" name="urinary_conditions" value="Difficulty in Urinaition"><label>Difficulty in Urinaition</label><br>
                                                        <input type="checkbox" name="urinary_conditions" value="Pain or buring on urination"><label>Pain or buring on urination</label><br>
                                                        <input type="checkbox" name="urinary_conditions" value="Frequent urination at night"><label>Frequent urination at night</label><br>
                                                        <input type="checkbox" name="urinary_conditions" value="Urgent need to urinate"><label>Urgent need to urinate</label><br>
                                                        <input type="checkbox" name="urinary_conditions" value="Incontinence of urine"><label>Incontinence of urine</label><br>
                                                        <input type="checkbox" name="urinary_conditions" value="Dribbling"><label>Dribbling</label><br>
                                                        <input type="checkbox" name="urinary_conditions" value="Decreased urine stream"><label>Decreased urine stream</label><br>
                                                        <input type="checkbox" name="urinary_conditions" value="Blood in urine"><label>Blood in urine</label><br>
                                                        <input type="checkbox" name="urinary_conditions" value="UTI/Stones/Prostate Infection"><label>UTI/Stones/Prostate Infection</label><br>
                                                    </div>
                                                    <div class="column">
                                                        <p>Peripheral Vascular</p>
                                                        <input type="checkbox" name="pv_conditions" value="Leg cramps"><label>Leg cramps</label><br>
                                                        <input type="checkbox" name="pv_conditions" value="Varicose veins"><label>Varicose veins</label><br>
                                                        <input type="checkbox" name="pv_conditions" value="Clots in veins"><label>Clots in veins</label><br>
                                                        <p>Muscoskeletal</p>
                                                        <input type="checkbox" name="ms_conditions" value="Pain"><label>Pain</label><br>
                                                        <input type="checkbox" name="ms_conditions" value="Swelling"><label>Swelling</label><br>
                                                        <input type="checkbox" name="ms_conditions" value="Stiffness"><label>Stiffness</label><br>
                                                        <input type="checkbox" name="ms_conditions" value="Decrease joint motion"><label>Decrease joint motion</label><br>
                                                        <input type="checkbox" name="ms_conditions" value="Broken bone"><label>Broken bone</label><br>
                                                        <input type="checkbox" name="ms_conditions" value="Serious sprains"><label>Serious sprains</label><br>
                                                        <input type="checkbox" name="ms_conditions" value="Arthritis"><label>Arthritis</label><br>
                                                        <input type="checkbox" name="ms_conditions" value="Gout"><label>Gout</label><br>
                                                        <p>Neurologic</p>
                                                        <input type="checkbox" name="neuro_conditions" value="Headaches"><label>Headaches</label><br>
                                                        <input type="checkbox" name="neuro_conditions" value="Seizures"><label>Seizures</label><br>
                                                        <input type="checkbox" name="neuro_conditions" value="Loss of consciousness/Fainting"><label>Loss of consciousness/Fainting</label><br>
                                                        <input type="checkbox" name="neuro_conditions" value="Paralysis"><label>Paralysis</label><br>
                                                        <input type="checkbox" name="neuro_conditions" value="Weakness"><label>Weakness</label><br>
                                                        <input type="checkbox" name="neuro_conditions" value="Loss of muscle size"><label>Loss of muscle size</label><br>
                                                        <input type="checkbox" name="neuro_conditions" value="Muscle spasm"><label>Muscle spasm</label><br>
                                                        <input type="checkbox" name="neuro_conditions" value="Tremor"><label>Tremor</label><br>
                                                        <input type="checkbox" name="neuro_conditions" value="Involuntary movement"><label>Involuntary movement</label><br>
                                                        <input type="checkbox" name="neuro_conditions" value="Incoordination"><label>Incoordination</label><br>
                                                        <input type="checkbox" name="neuro_conditions" value="Numbness"><label>Numbness</label><br>
                                                        <input type="checkbox" name="neuro_conditions" value="Feeling of pins and needles"><label>Feeling of pins and needles</label><br>
                                                        <p>Hematologic</p>
                                                        <input type="checkbox" name="hema_conditions" value="Anemia"><label>Anemia</label><br>
                                                        <input type="checkbox" name="hema_conditions" value="Easy bruising/bleeding"><label>Easy bruising/bleeding</label><br>
                                                        <input type="checkbox" name="hema_conditions" value="Past tranfusions"><label>Past tranfusions</label><br>
                                                        <p>Endocrine</p>
                                                        <input type="checkbox" name="endo_conditions" value="Abnormal Growth"><label>Abnormal Growth</label><br>
                                                        <input type="checkbox" name="endo_conditions" value="Increased appetite"><label>Increased appetite</label><br>
                                                        <input type="checkbox" name="endo_conditions" value="Increased thirst"><label>Increased thirst</label><br>
                                                        <input type="checkbox" name="endo_conditions" value="Increase urine production"><label>Increase urine production</label><br>
                                                        <input type="checkbox" name="endo_conditions" value="Thyroid trouble"><label>Thyroid trouble</label><br>
                                                        <input type="checkbox" name="endo_conditions" value="Heat/cold Intolerance"><label>Heat/cold Intolerance</label><br>
                                                        <input type="checkbox" name="endo_conditions" value="Excessive Sweating"><label>Excessive Sweating</label><br>
                                                        <input type="checkbox" name="endo_conditions" value="Diabetes"><label>Diabetes</label><br>
                                                    </div>
                                                {% endif %}
                                                <button type="submit" name="rosButton" value={{ chosenPatientData_id }}>Save</button>
                                            </form>
                                            <button id="closeModalButton">Close</button>
                                        </div>
                                    </div>
                                </div>

                                <div id="diagnosisButton">
                                    <button onclick="toggleDropdown()">Diagnosis</button>
                                    <form id="diagnosis" method='post'>
                                        {% csrf_token %}
                                        <div id="diagnosisDropdown" class="dropdown-content" style="display: none;">
                                            <select id="health-conditions" name="diagnosis" list="disease_name_suggestions">
                                                <datalist id="disease_name_suggestion">
                                                    <option value="">-- Select Disease --</option>
                                                    {% for medicine in medicines_list %}
                                                        <option value="{{ medicine }}">{{ medicine }}</option>
                                                    {% endfor %}
                                                </datalist>
                                            </select>
                                            <button type="submit" name="diagnosisButton" value={{ chosenPatientData_id }}>Save</button>
                                        </div>
                                    </form>
                                    {% if chosenPatientConsulNotes %}
                                        {% for chosenPatientConsulNotes_id, chosenPatientConsulNotes_data in chosenPatientConsulNotes.items %}
                                            {% if chosenPatientConsulNotes_data.diagnosis %}
                                                <p >Diagnosis: {{ chosenPatientConsulNotes_data.diagnosis }}</p>
                                            {% else %} 
                                                <p>Diagnosis: No Current Diagnosis</p>
                                            {% endif %} 
                                        {% endfor %}   
                                    {% else %} 
                                        <p>Diagnosis: No Current Diagnosis</p>
                                    {% endif %} 
                                </div> 
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% comment %} Diagnostic Test {% endcomment %}
                <div class = "container-big">
                    {% for chosenPatientData_id, chosenPatientData_data in chosenPatientData.items %}
                    <div class = "container-small" style="width: 300px;">
                        <div class = "head">Diagnostic Tests</div>
                            <div class="container-inside">
                                <button><a href = "{% url 'diagnostic_imagery_reports' %}?chosenPatient={{chosenPatientData_data.uid}}">View Results</a></button>
                                <button id="requestLabTestButton">Request New Test</button>
                                <div id="newLabTestModal" class="modal2" style="display: none;">
                                    <div class="modal-content2">
                                        <h2>Request New Test</h2>
                                        <form method="post" id="newLabTestForm">
                                            {% csrf_token %}
                                            <input type="checkbox" id="bloodTestCheckbox" name="bloodTestCheckbox">
                                            <label for="bloodTestCheckbox">Blood Test</label><br>
                                            <input type="checkbox" id="urineTestCheckbox" name="urineTestCheckbox">
                                            <label for="urineTestCheckbox">Urine Test</label><br>
                                            <input type="checkbox" id="stoolTestCheckbox" name="stoolTestCheckbox">
                                            <label for="stoolTestCheckbox">Stool Test</label><br>
                                            <input type="checkbox" id="tissueBiopsyCheckbox" name="tissueBiopsyCheckbox">
                                            <label for="tissueBiopsyCheckbox">Tissue Biopsy</label><br>
                                            <input type="checkbox" id="xrayCheckbox" name="xrayCheckbox">
                                            <label for="xrayCheckbox">X-rays</label><br>
                                            <input type="checkbox" id="ctScanCheckbox" name="ctScanCheckbox">
                                            <label for="ctScanCheckbox">Computed Tomography/CT Scan</label><br>
                                            <input type="checkbox" id="mriCheckbox" name="mriCheckbox">
                                            <label for="mriCheckbox">Magnetic Resonance Imaging/MRI</label><br>
                                            <input type="checkbox" id="ultrasoundCheckbox" name="ultrasoundCheckbox">
                                            <label for="ultrasoundCheckbox">Ultrasound</label><br>
                                            <input type="checkbox" id="ecgCheckbox" name="ecgCheckbox">
                                            <label for="ecgCheckbox">Electrocardiogram/ECG/EKG</label><br>
                                            <input type="checkbox" id="colonoscopyCheckbox" name="colonoscopyCheckbox">
                                            <label for="colonoscopyCheckbox">Colonoscopy</label><br>
                                            <input type="checkbox" id="bronchoscopyCheckbox" name="bronchoscopyCheckbox">
                                            <label for="bronchoscopyCheckbox">Bronchoscopy</label><br>
                                            <input type="checkbox" id="petScanCheckbox" name="petScanCheckbox">
                                            <label for="petScanCheckbox">Positron Emission Tomography (PET) Scan</label><br>
                                            <button type="submit" name="submitLabTestRequest">Submit</button>
                                            <button id="closeModal">Cancel</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>

            <div id="right-container"  style="width: 100%;">
            {% comment %} Progess Notes {% endcomment %}
                <div class = "container-big">
                    <div class = "container-small" style="width: 100%;">
                        <div class = "head">Progress Notes</div>
                            <div id = "progress-notes">
                                <div id = "progress-note" style="height: 150px; overflow-y: auto;">
                                    {% for chosenPatientDatas_id, chosenPatientDatas_data in chosenPatientDatas.items %}
                                        {% if chosenPatientDatas_data.status == 'Inpatient' %}
                                            <table>
                                                <tr>
                                                    <th>Last Updated</th>
                                                    <th>Nurse</th>
                                                    <th>Focus</th>
                                                    <th>Notes</th>
                                                </tr>
                                                {% for chosenPatientData_id, chosenPatientData_data in chosenPatientData.items %}
                                                    {% for progressnotes_id, progressnotes_data in progressnotes.items %}
                                                        {% if progressnotes_id == chosenPatientData_data.uid %}
                                                            {% for id, data in progressnotes_data.items %}
                                                                <tr>
                                                                    <td style="text-align: center;">{{ data.date }} {{ data.time }}</td>
                                                                    <td style="text-align: center;">
                                                                        {% for nurse_id, nurse_data in nurses.items %}
                                                                            {% if nurse_id == data.nurseID %}
                                                                                {{ nurse_data.fname }} {{ nurse_data.lname }}
                                                                            {% endif %}
                                                                        {% endfor %}
                                                                    </td>
                                                                    <td style="text-align: center;">{{ data.focus }}</td>
                                                                    <td style="text-align: center;">{{ data.notes }}</td>
                                                                </tr>
                                                            {% endfor %}
                                                        {% endif %}
                                                    {% endfor %}
                                                {% endfor %}
                                            </table>
                                        {% else %}
                                            <p style="font-size: 14px; font-weight: normal;"><em>Not available for Outpatients</em></p>
                                        {% endif %}
                                    {% endfor %}
                                    
                                </div>
                            </div>
                    </div>
                </div>

                {% comment %} Vital Signs {% endcomment %}
                <div class = "container-big">
                    {% for chosenPatientData_id, chosenPatientData_data in chosenPatientData.items %}
                        <div class = "container-small"  style="width: 100%;">
                            <div class="head">Latest Vital Signs</div>
                            {% for chosenPatientDatas_id, chosenPatientDatas_data in chosenPatientDatas.items %}
                                        {% if chosenPatientDatas_data.status == 'Inpatient' %}

                            <div id="vital-signs-table">
                                <table id="vital-signs">
                                    <tr id="label">
                                        <th>Date and Time</th>
                                        <th>Temperature</th>
                                        <th>Blood Pressure</th>
                                        <th>Pulse</th>
                                        <th>Respiration</th>
                                        <th>Pain Index</th>
                                        {% comment %} <th>Stool</th>
                                        <th>Fluid Output</th>
                                        <th>Fluid Intake</th> {% endcomment %}
                                    </tr>
                                    {% for sorted_vital_signs_id, sorted_vital_signs_data in sorted_vital_signs.items %}
                                        {% if forloop.counter <= 2 %}
                                            <tr>
                                                <td>{{ sorted_vital_signs_data.date }} {{ sorted_vital_signs_data.time }}</td>
                                                <td>{{ sorted_vital_signs_data.temperature }} °C</td>
                                                <td>{{ sorted_vital_signs_data.bloodpressure }}</td>
                                                <td>{{ sorted_vital_signs_data.pulse }} bpm</td>
                                                <td>{{ sorted_vital_signs_data.respiration }}</td>
                                                <td>{{ sorted_vital_signs_data.painindex }}/10</td>
                                                {% comment %} <td><input type="checkbox" disabled></td>
                                                <td><input type="checkbox" disabled></td>
                                                <td> ml</td> {% endcomment %}
                                            </tr>
                                        {% endif %}
                                    {% endfor %}
                                </table>
                                    <a href="{% url 'patient_vital_signs_history' %}?chosenPatient={{ chosenPatientData_data.uid }}" id="view-vitalsigns-history">View History</a>
                                </div>
                            </div>
                                {% else %}
                                    <p style="margin-left: 10px; font-size: 14px; font-weight: normal;"><em>Not available for Outpatients</em></p>
                                {% endif %}
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        

        </div>
    </div>
</div>

<div id="inpatientModal1" class="modal1" style="display: none; overflow-y: auto;">
    <div class="modal-content1">
        <span class="close" onclick="closeModal()">&times;</span> <!-- Close button -->

        <h2>Discharge Instruction Form</h2>
        <form id="dischargeForm1" method="post">
            {% csrf_token %}
            <div style="margin: 5px; font-weight: bold;">Patient Details</div>
            <div class="form-row">
                {% for chosenPatientData_id, chosenPatientData_data in chosenPatientData.items %}
                    <div class="form-group">
                        <div style="margin: 5px; font-weight: bold;">Patient Name: </div>
                        <input type="hidden" name="pname" value="{{ chosenPatientData_data.fname }} {{ chosenPatientData_data.lname }}">

                        <div class="form_container" value="{{ chosenPatientData_data.fname }} {{ chosenPatientData_data.lname }}" name="pname">{{ chosenPatientData_data.fname }} {{ chosenPatientData_data.lname }}</div>
                    </div>
                    <div class="form-group">
                        <div style="margin: 5px; font-weight: bold;">Birthday: </div>
                        <div class="form_container" value="{{ chosenPatientData_data.bday }}" name="bday">{{ chosenPatientData_data.bday }}</div>
                        <input type="hidden" name="bday" value="{{ chosenPatientData_data.bday }}">

                    </div>
                    <div class="form-group">
                        <div style="margin: 5px; font-weight: bold;">Gender: </div>
                        <div class="form_container" value="{{ chosenPatientData_data.gender }}" name="gender">{{ chosenPatientData_data.gender }}</div>
                        <input type="hidden" name="gender" value="{{ chosenPatientData_data.gender }}">

                    </div>
                    {% for chosenPatientConsulNotes_id, chosenPatientConsulNotes_data in chosenPatientConsulNotes.items %}
                        <div class="form-group">
                            <div style="margin: 5px; font-weight: bold;">Diagnosis: </div>
                            <div class="form_container" value="{{ chosenPatientConsulNotes_data.diagnosis }}" name="diagnosis">{{ chosenPatientConsulNotes_data.diagnosis }}</div>
                            <input type="hidden" name="diagnosis" value="{{ chosenPatientConsulNotes_data.diagnosis }}">

                        </div>
                    {% endfor %}
                    {% for doctor_id, doctor_data in doctors.items %}
                        {% if doctor_data.uid == uid %}
                            <div class="form-group">
                                <div style="margin: 5px; font-weight: bold;">Attending Physician: </div>
                                <div class="form_container" value="{{ doctor_data.fname }} {{ doctor_data.lname }}" name="attending_physician">{{ doctor_data.fname }} {{ doctor_data.lname }}</div>
                                <input type="hidden" name="attending_physician" value="{{ doctor_data.fname }} {{ doctor_data.lname }}">

                            </div>
                        {% endif %}
                    {% endfor %}
                    <div class="form-group">
                        <div style="margin: 5px; font-weight: bold;">Total Days of Stay: </div>
                        <div class="form_container" value="{{ num_days }}" name="today_days_stay">{{ num_days }}</div>
                        <input type="hidden" name="num_days" value="{{ num_days }}">

                    </div>
                {% endfor %}
            </div>
            <hr>
            <div style="margin: 5px; font-weight: bold;">Follow Up</div>
            {% for appointmentsched_id, appointmentsched_data in appointmentschedule.items %}
                {% if appointmentsched_data.uid == uid %}
                    <div class="form-row">
                        <div class="form-group">
                            <label for="suggested-date" style="margin: 5px; font-weight: bold;">Suggested Schedule:</label>
                            <select id="selected_appointment_date" name="selected_appointment_date" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                                {% for key, value in nearest_dates.items %}
                                    <option value="{{ value }}">
                                        {% if key == 'one_week_from_now' %}
                                            1 Week: {{ value }}
                                        {% elif key == 'two_weeks_from_now' %}
                                            2 Weeks: {{ value }}
                                        {% elif key == 'three_weeks_from_now' %}
                                            3 Weeks: {{ value }}
                                        {% elif key == 'one_month_from_now' %}
                                            1 Month: {{ value }}
                                        {% endif %}
                                    </option>
                                {% endfor %}
                            </select><br>
                            <label for="suggested-time" style="margin: 5px; font-weight: bold;">Suggested Time:</label>
                            <div name="followup_time1" value={{ time_early }} style="margin-top: 5px;">{{ time_early }}</div><br>
                            <input type="hidden" name="followup_time1" value={{ time_early }}>

                        </div>
                    </div>
                {% endif %}
            {% endfor %}
            <hr>
            <div style="margin: 5px; font-weight: bold;">Prescriptions</div>
            <input type="checkbox" id="prescriptionCheckbox" style="margin-top: 10px;">Add Prescription</input>

            <div id="medications-container" style="display: none; width: 100%;">

                <div id="table-header" style="display: flex; width: 100%;">
                    <div style="flex: 1; text-align: center;"><input type="checkbox" id="select-all-checkbox"></div>
                    <div style="flex: 1; text-align: center;">Days</div>
                    <div style="flex: 1; text-align: center;">Medicine Name</div>
                    <div style="flex: 1; text-align: center;">Dosage</div>
                    <div style="flex: 1; text-align: center;">Route</div>
                    <div style="flex: 1; text-align: center;">Frequency</div>
                    <div style="flex: 1; text-align: center;">Additional Remarks</div>
                </div>
            
                <div id="table-body" style="display: flex; width: 100%;">
                    <div style="flex: 1; text-align: center;"><input type="checkbox" class="remove-checkbox"></div>
                    <div style="flex: 1; text-align: center;"><input type="number" name="days" style="width: 100px;"></div>
                    <div style="flex: 1; text-align: center;">
                        <input type="text" name="medicine_name" id="medicine_name_input" placeholder="Enter Medicine Name" list="medicine_name_suggestions">
                        <datalist id="medicine_name_suggestions">
                            {% for medicines in medicines_list %}
                                <option value="{{ medicines }}">{{ medicines }}</option>
                            {% endfor %}
                        </datalist>
                    </div>
                    
                    <div style="flex: 1; text-align: center;">
                        <select class="dosage-input" name="dosage" id="dosage_input">
                            <option value="" selected disabled>Select Dosage</option>
                        </select>
                    </div>
                    <div style="flex: 1; text-align: center;">
                        <input type="text" name="route" id="route_input" placeholder="Enter Route Name">
                    </div>
                    <div style="flex: 1; text-align: center;">
                        <div style="text-align: center;">
                            <input type="checkbox" name="times-daily[]" id="morning-checkbox" value="Morning">
                            <label for="morning-checkbox">Morning</label>
                        </div>
                        <div style="text-align: center;">
                            <input type="checkbox" name="times-daily[]" id="afternoon-checkbox" value="Afternoon">
                            <label for="afternoon-checkbox">Afternoon</label>
                        </div>
                        <div style="text-align: center;">
                            <input type="checkbox" name="times-daily[]" id="evening-checkbox" value="Evening">
                            <label for="evening-checkbox">Evening</label>
                        </div>
                    </div>
                    <div style="flex: 1; text-align: center;"><input type="text" class="remarks-input" placeholder="Additional Remarks" name="additionalremarks"></div>
                </div>
                
                <div id="update-with-new-order" style="width: 100%;">
                    <div id="buttons-container" style="width: 100%;">
                        <div id="add-medication-button" style="width: 50%; text-align: center;"><a href="#" id="add-medication-link">Add Medication</a></div>
                        <div id="remove-medication-button" style="width: 50%; text-align: center;"><a href="#" id="remove-medication-link">Remove Selected</a></div>
                    </div>
                </div>
            
            </div>
            <button name="discharge_patient" style="background-color: green;">Discharge Patient</button>
            </div>
            
        </form>
    </div>
</div>

<script>
    
    var prescriptionCheckbox = document.getElementById("prescriptionCheckbox");
    var prescriptionTable = document.getElementById("medications-container");

    prescriptionCheckbox.addEventListener("change", function() {
        if (prescriptionCheckbox.checked) {
            prescriptionTable.style.display = "table"; // Show the table
        } else {
            prescriptionTable.style.display = "none"; // Hide the table
        }
    });

    var pharmacyLists = JSON.parse('{{ pharmacy_lists|escapejs }}');
    console.log(pharmacyLists);  // Print pharmacy_lists to the console

    // Add your additional JavaScript code here
    const medicineNameInput = document.getElementById('medicine_name_input');
    const dosageInput = document.getElementById('dosage_input');
    const routeInput = document.getElementById('route_input');

    medicineNameInput.addEventListener('input', populateDosageDropdown);

    dosageInput.addEventListener('change', changeRouteDropdown);

    function populateDosageDropdown() {
        const selectedMedicine = medicineNameInput.value.trim();
        dosageInput.innerHTML = '<option value="" selected disabled>Select Dosage</option>'; // Reset dosage dropdown
        
        // Populate dosage dropdown based on selected medicine
        pharmacyLists.forEach(function(pharmacy) {
            if (pharmacy.Drug.trim() === selectedMedicine) { // Ensure consistent comparison
                const option = document.createElement('option');
                option.text = pharmacy.Strength;
                option.value = pharmacy.Strength;
                dosageInput.appendChild(option);
            }
        });

        // Trigger the change event on dosage dropdown to update the route dropdown
        dosageInput.dispatchEvent(new Event('change'));
    }

    function changeRouteDropdown() {
        const selectedStrength = dosageInput.value.trim();
        
        // Change route dropdown based on selected strength
        pharmacyLists.forEach(function(pharmacy) {
            if (pharmacy.Strength.trim() === selectedStrength) { // Ensure consistent comparison
                routeInput.value = pharmacy.Route;
            }
        });
    }

    // Get the add medication button
    var addMedicationButton = document.getElementById("add-medication-link");

    // Add event listener to the add medication button
    addMedicationButton.addEventListener("click", function(event) {
        event.preventDefault(); // Prevent default form submission behavior

        // Get the table body
        var tableBody = document.getElementById("table-body");

        // Create a new row
        var newRow = document.createElement("div");
        newRow.setAttribute("style", "display: flex; width: 100%;");

        // Add HTML content to the new row
        var newRowHTML = `
            <div style="flex: 1; text-align: center;"><input type="checkbox" class="remove-checkbox"></div>
            <div style="flex: 1; text-align: center;"><input type="number" name="days" style="width: 100px;"></div>
            <div style="flex: 1; text-align: center;">
                <input type="text" name="medicine_name" id="medicine_name_input" placeholder="Enter Medicine Name" list="medicine_name_suggestions">
                <datalist id="medicine_name_suggestions">
                    {% for medicine in medicines_list %}
                        <option value="{{ medicine }}">{{ medicine }}</option>
                    {% endfor %}
                </datalist>
            </div>
            <div style="flex: 1; text-align: center;">
                <select class="dosage-input" name="dosage" id="dosage_input">
                    <option value="" selected disabled>Select Dosage</option>
                </select>
            </div>
            <div style="flex: 1; text-align: center;">
                <input type="text" name="route" id="route_input" placeholder="Enter Route Name">
            </div>
            <div style="flex: 1; text-align: center;">
                <div style="text-align: center;">
                    <input type="checkbox" name="times-daily[]" id="morning-checkbox" value="Morning">
                    <label for="morning-checkbox">Morning</label>
                </div>
                <div style="text-align: center;">
                    <input type="checkbox" name="times-daily[]" id="afternoon-checkbox" value="Afternoon">
                    <label for="afternoon-checkbox">Afternoon</label>
                </div>
                <div style="text-align: center;">
                    <input type="checkbox" name="times-daily[]" id="evening-checkbox" value="Evening">
                    <label for="evening-checkbox">Evening</label>
                </div>
            </div>
            <div style="flex: 1; text-align: center;"><input type="text" class="remarks-input" placeholder="Additional Remarks" name="additionalremarks"></div>
        `;

        // Append the new row to the end of the table body
        tableBody.appendChild(newRow);
    });

    var reschedmodal = document.getElementById("myModal");
    var span = document.getElementById("closeModalButton1");
    
    const backButton = document.getElementById('backButton');
        
    backButton.addEventListener('click', function() {
        window.history.back();
    });
    function openModal(appointmentId) {
    
        reschedmodal.style.display = "block";

        // Set the value of appID input in the modal
        var appIDInput = document.getElementById('appID');
        appIDInput.value = appointmentId;
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
        reschedmodal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == reschedmodal) {
            reschedmodal.style.display = "none";
        }
    }

    document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('addDischargePrescription').addEventListener('click', function () {
            alert('Patient successfully discharged!');
        });
        document.getElementById('endAppointment').addEventListener('click', function () {
            alert('Appointment with Patient Ended!');
        });
        document.getElementById('appID').addEventListener('click', function () {
            var chosenPatientData_id = document.getElementById('appID').value;
            alert('Appointment Ended with Patient, Successfully set up a follow-up appointment.');
        });
        document.querySelector('button[name="submitLabTestRequest"]').addEventListener('click', function () {
            alert('Lab Test Request Submitted!');
        });
        document.getElementById('saveChiefComplaintButton').addEventListener('click', function () {
            alert('Chief Complaint Saved!');
        });
        document.querySelector('button[name="rosButton"]').addEventListener('click', function () {
            alert('Review of Systems Saved!');
        });
        document.querySelector('button[name="diagnosisButton"]').addEventListener('click', function () {
            alert('Diagnosis Saved!');
        });
        
    });
</script>

<script src="{% static 'js/patient_data.js' %}"></script>

<script>
    var healthConditions = document.getElementById("health-conditions");
    var otherDiagnosis = document.getElementById("otherDiagnosis");

    healthConditions.addEventListener("change", function() {
        if (this.value === "Others") {
            otherDiagnosis.style.display = "block";
        } else {
            otherDiagnosis.style.display = "none";
        }
    });

    // Pressing Admit Button
    function confirmAdmit() {
        alert("Patient admitted successfully!");
    }
    
    // Get the button and modal
    var reviewOfSystemsButton = document.getElementById("reviewOfSystemsButton");
    var reviewOfSystemsModal = document.getElementById("reviewOfSystemsModal");
    var closeModalButton = document.getElementById("closeModalButton");
    var requestLabTestButton = document.getElementById("requestLabTestButton");
    var newLabTestModal = document.getElementById("newLabTestModal");

    // ROS Modal
    reviewOfSystemsButton.onclick = function() {
        reviewOfSystemsModal.style.display = "block";
        reviewOfSystemsModal.style.position = "fixed"; // Set modal position to fixed
        reviewOfSystemsModal.style.top = "50%"; // Center vertically
        reviewOfSystemsModal.style.left = "50%"; // Center horizontally
        reviewOfSystemsModal.style.transform = "translate(-50%, -50%)"; // Center the modal
    }

    // When the user clicks on the close button, close the modal
    closeModalButton.onclick = function() {
        reviewOfSystemsModal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == reviewOfSystemsModal) {
            reviewOfSystemsModal.style.display = "none";
        }
    }

    // Test Request Modal
    requestLabTestButton.onclick = function() {
        newLabTestModal.style.display = "block";
        newLabTestModal.style.position = "fixed"; 
        newLabTestModal.style.top = "50%";
        newLabTestModal.style.left = "50%";
        newLabTestModal.style.transform = "translate(-50%, -50%)";
    }


    document.getElementById("closeModal").addEventListener("click", function() {
        closeModal(); // Call the closeModal function when the cancel button is clicked
    });
    
    function closeModal() {
        // Close the modal or perform any other desired action
        var modal = document.getElementById("newLabTestModal");
        modal.style.display = "none"; // Assuming the modal is a div with id "newLabTestModal"
    }

    function closeModal() {
        var modal = document.getElementById('inpatientModal1');
        modal.style.display = 'none';
    }
    
    // Get the close button inside the modal
    var closeModalButton = document.getElementById("closeModal");

    // When the user clicks on the close button, close the modal
    closeModalButton.onclick = function() {
        var reviewOfSystemsModal = document.getElementById("reviewOfSystemsModal");
        reviewOfSystemsModal.style.display = "none";
    }

    // Opens Discharge Modal when "Discharge" is Clicked
    function openDischargeModal() {
        var modal = document.getElementById("inpatientModal1");
        modal.style.display = "block";
    }

    function openAppointmentModal() {
        var modal = document.getElementById("appModal");
        modal.style.display = "block";
    }

    // Discharge Instruction Form JS Codes
    var closeInpatientModalButton = document.getElementById("closeInpatientModal1");
    var inpatientModal = document.getElementById("inpatientModal1");

    closeInpatientModalButton.addEventListener("click", function() {
        inpatientModal.style.display = "none";
    });

    document.addEventListener("DOMContentLoaded", function() {
        const addMedicineButton = document.getElementById("addMedicine1");
        const removeSelectedRowsButton = document.getElementById("removeSelectedRows");
        const closeInpatientModalButton = document.getElementById("closeInpatientModal1");
        
        addMedicineButton.addEventListener('click', function() {
            addMedicineRow();
        });
        
        removeSelectedRowsButton.addEventListener('click', function() {
            removeSelectedRows();
        });
        
        closeInpatientModalButton.addEventListener('click', function() {
            document.getElementById("inpatientModal1").style.display = "none";
        });
        // Get the status of the patient
        var statusElement = document.getElementById("lname");
        var status = statusElement.textContent.trim();
    
        // Get the containers for progress notes, vital signs, consultation notes, and diagnostic tests
        var progressNotesContainer = document.getElementById("progress-notes-container");
        var vitalSignsContainer = document.getElementById("vital-signs-container");
        var consultationNotesContainer = document.getElementById("consultation-notes-container");
        var diagnosticTestsContainer = document.getElementById("diagnostic-tests-container");
    
        // Show/hide containers based on patient status
        if (status === "Inpatient") {
            progressNotesContainer.style.display = "block";
            vitalSignsContainer.style.display = "block";
            consultationNotesContainer.style.display = "none";
            diagnosticTestsContainer.style.display = "block";
        } else if (status === "Outpatient") {
            progressNotesContainer.style.display = "none";
            vitalSignsContainer.style.display = "none";
            consultationNotesContainer.style.display = "block";
            diagnosticTestsContainer.style.display = "block";
        }
    });
    
    function addMedicineRow() {
        const prescriptionsContainer = document.getElementById("prescriptionsContainer1");
        const newRow = document.createElement("div");
        newRow.classList.add("prescription-row1");
    
        newRow.innerHTML = `
            <div class="cell"><input type="checkbox" name="selectMedicine[]" class="selectMedicine" /></div>
            <div class="cell"><input type="text" name="medicineName1" id="medicine_name_input" placeholder="Enter Medicine Name" list="medicine_name_suggestions">
                <datalist id="medicine_name_suggestions">
                    {% for medicine in medicines_list %}
                        <option value="{{ medicine }}">
                    {% endfor %}
                </datalist></div>
            <div class="cell"><input type="text" name="dosage1" /></div>
            <div class="cell"><select class="route-dropdown" name="route1">
                <option value="" selected disabled>Select Route</option>
                <option value="Oral">Oral</option>
                <option value="Injection">Injection</option>
                <option value="Topical">Topical</option>
            </select></div>
            <div>
                <div style="flex: 1; text-align: center;">
                    <select class="frequency-dropdown" name="frequency1" id="frequency-dropdown">
                        <option value="" selected disabled>Select Frequency</option>
                        <option value="Once Daily">Once Daily</option>
                        <option value="Twice Daily">Twice Daily</option>
                        <option value="Thrice Daily">Thrice Daily</option>
                    </select>
                </div>
                <div id="once-daily-checkboxes" style="display: none; margin-top: 10px; flex-direction: column;">
                    <div style="text-align: center;">
                        <input type="checkbox" name="times-once-daily[]" id="morning-checkbox" value="Morning">
                        <label for="morning-checkbox">Morning</label>
                    </div>
                    <div style="text-align: center;">
                        <input type="checkbox" name="times-once-daily[]" id="afternoon-checkbox" value="Afternoon">
                        <label for="afternoon-checkbox">Afternoon</label>
                    </div>
                    <div style="text-align: center;">
                        <input type="checkbox" name="times-once-daily[]" id="evening-checkbox" value="Evening">
                        <label for="evening-checkbox">Evening</label>
                    </div>
                </div>
                <div id="twice-daily-checkboxes" style="display: none; margin-top: 10px; flex-direction: column;">
                    <div style="text-align: center;">
                        <input type="checkbox" name="times-twice-daily[]" id="twice-daily-morning-checkbox" value="Morning">
                        <label for="twice-daily-morning-checkbox">Morning</label>
                    </div>
                    <div style="text-align: center;">
                        <input type="checkbox" name="times-twice-daily[]" id="twice-daily-afternoon-checkbox" value="Afternoon">
                        <label for="twice-daily-afternoon-checkbox">Afternoon</label>
                    </div>
                    <div style="text-align: center;">
                        <input type="checkbox" name="times-twice-daily[]" id="twice-daily-evening-checkbox" value="Evening">
                        <label for="twice-daily-evening-checkbox">Evening</label>
                    </div>     
                </div>                    
            </div>
            <div class="cell"><input type="text" name="remarks1" /></div>
        `;
    
        prescriptionsContainer.appendChild(newRow);
        attachEventListenersToNewElements();
    }

    function attachEventListenersToNewElements() {
        const frequencyDropdowns = document.querySelectorAll(".frequency-dropdown");
        frequencyDropdowns.forEach(function(dropdown) {
            dropdown.addEventListener("change", function() {
                const selectedFrequency = dropdown.value;
                const onceDailyCheckboxes = dropdown.parentElement.nextElementSibling.querySelector("#once-daily-checkboxes");
                const twiceDailyCheckboxes = dropdown.parentElement.nextElementSibling.querySelector("#twice-daily-checkboxes");
                if (selectedFrequency === "Once Daily") {
                    onceDailyCheckboxes.style.display = "flex";
                    twiceDailyCheckboxes.style.display = "none";
                } else if (selectedFrequency === "Twice Daily") {
                    onceDailyCheckboxes.style.display = "none";
                    twiceDailyCheckboxes.style.display = "flex";
                } else {
                    onceDailyCheckboxes.style.display = "none";
                    twiceDailyCheckboxes.style.display = "none";
                }
            });
        });
    }

    // Call the function to attach event listeners to existing elements
    attachEventListenersToNewElements();

    const frequencyDropdown = document.getElementById("frequency-dropdown");
    const onceDailyCheckboxes = document.getElementById("once-daily-checkboxes");
    const twiceDailyCheckboxes = document.getElementById("twice-daily-checkboxes");
    
    frequencyDropdown.addEventListener("change", function() {
        const selectedFrequency = frequencyDropdown.value;
        if (selectedFrequency === "Once Daily") {
            onceDailyCheckboxes.style.display = "flex";
            twiceDailyCheckboxes.style.display = "none";
        } else if (selectedFrequency === "Twice Daily") {
            onceDailyCheckboxes.style.display = "none";
            twiceDailyCheckboxes.style.display = "flex";
        } else {
            onceDailyCheckboxes.style.display = "none";
            twiceDailyCheckboxes.style.display = "none";
        }
    });
    
    function removeSelectedRows() {
        const selectedCheckboxes = document.querySelectorAll('.selectMedicine:checked');
        selectedCheckboxes.forEach(function(checkbox) {
            checkbox.closest('.prescription-row1').remove();
        });
    }

    document.getElementById('medicineName1').addEventListener('input', function() {
        var query = this.value;
        var suggestions = Array.from(document.getElementById('medicine_name_suggestions').options)
            .map(option => option.value)
            .filter(medicine => medicine.toLowerCase().includes(query.toLowerCase()));
    
        displayAutocompleteSuggestions(suggestions);
    });
    
    function displayAutocompleteSuggestions(suggestions) {
        var dropdown = document.getElementById('medicine_name_suggestions');
        dropdown.innerHTML = '';
    
        suggestions.forEach(function(suggestion) {
            var option = document.createElement('option');
            option.value = suggestion;
            dropdown.appendChild(option);
        });
    }
        function toggleFollowup() {
            var followupDiv = document.getElementById("followupDiv");
            var checkbox = document.getElementById("followupCheckbox");
            
            if (checkbox.checked) {
                followupDiv.style.display = "block";
            } else {
                followupDiv.style.display = "none";
            }
        }
</script>
{% endblock %}