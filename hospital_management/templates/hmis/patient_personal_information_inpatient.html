{%load static%}
<title>{% block title %}Patient Data{% endblock %}</title>

{% block styles%} 
<link rel="stylesheet" href="{% static 'css/patient_personal_information.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<style>
    .modal1 {
        display: none;
        position: fixed;
        z-index: 1000;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.5);
    }
    
    .modal-content1 {
        background-color: white;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        border-radius: 5px;
        max-width: 600px;
        position: absolute;
        top: 50%;
        left: 50%;
        width: 70%;
        transform: translate(-50%, -50%);
    }
    
    .modal-content1 h2 {
        margin-top: 0;
    }
    
    .modal-content1 label {
        display: block;
        margin-bottom: 5px;
    }
    
    .modal-content1 textarea,
    .modal-content1 input[type="text"] {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        border-radius: 3px;
    }
    
    .modal-content1 table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 10px;
    }
    
    .modal-content1 table th,
    .modal-content1 table td {
        padding: 8px;
        border: 1px solid #ccc;
    }
    
    .modal-content1 button {
        padding: 10px 20px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        margin-right: 10px;
    }
    
    .modal-content1 button:last-child {
        margin-right: 0;
        background-color: #ccc;
    }
    
    .close1 {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }
    
    .close1:hover,
    .close1:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
    }

    .prescriptions-container {
        display: grid;
        display: flex; 
        flex-direction: column;
        grid-template-columns: repeat(6, 1fr);
        gap: 10px;
        grid-auto-flow: row; /* Ensure rows are stacked */
    }
    
    .prescription-row1 {
        display: grid;
        
        grid-template-columns: repeat(6, 1fr);
        border: 1px solid #ccc;
    }
    
    .cell {
        padding: 5px;
        border: 1px solid #ccc;
    }
    
    .header {
        font-weight: bold;
        background-color: #f0f0f0;
    }
    
    
    
</style>
{% endblock styles%}

{% block content %}
<div id = "whole-screen">
    <div id = "side-menu">
        <div id = "all-info">
            <div id = "user-info"> 
                <div id = "image">
                    <img src="{% static 'logo-color.png' %}" id = "display-photo">
                </div>
                <div id="information">
                    {% for doctor_id, doctor_data in doctors.items %}
                        {% if doctor_data.uid == uid %}
                            <div id="name"> {{ doctor_data.fname }} {{ doctor_data.lname }}</div>
                            <div id="role"> {{ doctor_data.specialization}}</div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            <div id="menu"> 
                <div id="a1"><i class="fas fa-tachometer-alt"></i> <a href="{% url 'DoctorDashboard' %}">Dashboard</a></div>
                <div id="a2"> <i class="far fa-calendar-alt"></i> <a href="{% url 'AppointmentUpcoming' %}">Appointments</a></div>
                <div id="a3" style="font-weight: bold;"><i class="fas fa-user"></i> <a href="{% url 'patient_data_doctor_view' %}">Patients</a></div>
                <div id="a5"><i class="far fa-envelope"></i> <a href="">Message</a></div>
                <div id="a6"><i class="far fa-user-circle"></i> <a href="">Profile</a></div>
                <div id="a7"><i class="fas fa-cog"></i> <a href="">Settings</a></div>
                <div id="a4"><i class="fas fa-sign-out-alt"></i> <a href="{% url 'logout' %}"> Logout</a></div>

            </div>
        </div>
    </div>
    <div id = "other-side">
        <div id = "title">
            <div id = "left">
                <button id="backButton">Back</button>
            </div>
        </div>
        <div id = "patient-info">
            {% for chosenPatientData_id, chosenPatientData_data in chosenPatientData.items %}
            <div id = "personal-information">
                <div id = "head">Personal Information</div>
                    <div id = "patientnumber">
                        <div id = "pnumber-label">Patient Number:</div>
                        <div id = "pnumber"> </div>
                    </div>
                    <div id = "first">
                        <div id = "fname-label">Name:</div>
                        <div id = "fname">{{ chosenPatientData_data.fname }} {{ chosenPatientData_data.lname }}</div>
                    </div>
                    
                    <div id = "gender">
                        <div id = "gender-label">Sex:</div>
                        <div id = "gender-view">{{ chosenPatientData_data.gender }}</div>
                    </div>

                    <div id = "bday">
                        <div id = "bday-label">Birthday:</div>
                        <div id = "birthday">{{ chosenPatientData_data.bday }}</div>

                        {% comment %} <div id = "birthday">{{ chosenPatientData_data.bday }} ({{ chosenPatientAge }} years old)</div> {% endcomment %}
                    </div>
                    <div id = "last">
                        <div id = "lname-label">Status:</div>
                        <div id = "lname"></div>
                    </div>
                    {% for chosenPatientDatas_id, chosenPatientDatas_data in chosenPatientDatas.items %}
                    <div class="toggle-switch">
                        <input type="checkbox" id="patientTypeToggle" {% if chosenPatientDatas_data.status == 'Inpatient' %} checked {% endif %}>
                        <label for="patientTypeToggle">{{ chosenPatientDatas_data.status }}</label>
                        <button id="endtransaction">Appointment Finished</button>
                    </div>
                    {% endfor %}

                    <button onclick="toggleBiometricInfo()">Biometric Information</button>
                    <div id="biometric-info" style="display: none;">
                        {% for chosenPatientDatas_id, chosenPatientDatas_data in chosenPatientDatas.items %}
                        <div id = "blood-type">
                            <div id = "blood-type-label">Blood Type:</div>
                            <div id = "blood-type-view">{{ chosenPatientDatas_data.bloodtype }}</div>
                        </div>
                        <div id = "height">
                            <div id = "height-label">Height: </div>
                            <div id = "height-view">{{ chosenPatientDatas_data.height }} cm</div>
                        </div><div id = "weight">
                            <div id = "weight-label">Weight:</div>
                            <div id = "weight-view">{{ chosenPatientDatas_data.weight }} kg</div>
                        </div>
                        {% endfor %}
                    </div>
                    <button onclick="toggleContactInfo()">Contact Information</button>
                    <div id="contact-details" style="display: none;">
                        <div id="address">
                            <div id="address-label">Address:</div>
                            <div id="address-view">{{ chosenPatientData_data.address }}</div>
                        </div>
                        <div id="phone">
                            <div id="phone-number-label">Phone Number:</div>
                            <div id="phone-number">{{ chosenPatientData_data.cnumber }}</div>
                        </div>
                        <div id="email">
                            <div id="email-label">E-mail Address:</div>
                            <div id="e-mail">{{ chosenPatientData_data.email }}</div>
                        </div>
                    </div>
                    <button><a href="{% url 'patient_medical_history' %}?chosenPatient={{chosenPatientData_data.uid}}">Medical History</a></button>
                    <button><a href = "{% url 'view_treatment_plan_all' %}?chosenPatient={{chosenPatientData_data.uid}}">Treatment Plan</a></button>
                </div>
            {% endfor %}
        </div>
        <div id = "progress-notes-container">
            <div id = "personal-information">
                <div id = "head">Progress Notes</div>
                    <div id = "progress-notes">
                        <div id = "progress-note">
                            {% for chosenPatientData_id, chosenPatientData_data in chosenPatientData.items %}
                            <div id = "notes">{{ chosenPatientData_data.fname }} {{ chosenPatientData_data.lname }}
                                - Stable vital signs <br>
                                - Medication administered 9:00AM <br>
                                - Pain intensity decreased<br>
                                Last Update: 01/17/23 11:32AM
                            </div>
                            {% endfor %}
                            <div id = "edit-note-button">
                                <a href = "" id = "edit-note"><!--add icon-->Edit Progress Notes</a>
                            </div>
                        </div>
                    </div>
            </div>
        </div>

        <div id="vital-signs-container">
            {% for chosenPatientData_id, chosenPatientData_data in chosenPatientData.items %}
                <div id="vital-signs-box">
                    <div id="head">Latest Vital Signs</div>
                    <div id="vital-signs-table">
                        <table id="vital-signs">
                            <tr id="label">
                                <th>Date and Time</th>
                                {% comment %} <th>Weight</th> {% endcomment %}
                                <th>Temperature</th>
                                <th>Blood Pressure</th>
                                <th>Pulse</th>
                                <th>Respiration</th>
                                <th>Pain Index</th>
                                <th>Stool</th>
                                <th>Fluid Output</th>
                                <th>Fluid Intake</th>
                            </tr>
                            {% for chosenPatientVitalEntryData_id, chosenPatientVitalEntryData_data in chosenPatientVitalEntryData.items %}
                                {% if forloop.counter == 1 %}
                                    <tr>
                                        <td>{{ chosenPatientVitalEntryData_data.date }} {{ chosenPatientVitalEntryData_data.time }}</td>
                                        {% comment %} {% if chosenPatientVitalEntryData_data.weight == "-" %}
                                            <td>{{ chosenPatientVitalEntryData_data.weight }}</td>
                                        {% else %}
                                            <td>{{ chosenPatientVitalEntryData_data.weight }} kgs</td>
                                        {% endif %} {% endcomment %}
                                        <td>{{ chosenPatientVitalEntryData_data.temperature }} Â°C</td>
                                        <td>{{ chosenPatientVitalEntryData_data.bloodpressure }}</td>
                                        <td>{{ chosenPatientVitalEntryData_data.pulse }} bpm</td>
                                        <td>{{ chosenPatientVitalEntryData_data.respiration }}</td>
                                        <td>{{ chosenPatientVitalEntryData_data.painindex }}/10</td>
                                        <td><input type="checkbox" disabled></td>
                                        <td><input type="checkbox" disabled></td>
                                        <td> ml</td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </table>
                        <div id="below-table">
                            <div id="view-vs-history-button" class="pagination">
                                <a href="{% url 'patient_vital_signs_history' %}?chosenPatient={{ chosenPatientData_data.uid }}" id="view-vs-history">View History</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

        <div id="consultation-notes-container">
            
            {% for chosenPatientData_id, chosenPatientData_data in chosenPatientData.items %}
            <div id="consultation-notes">
                <div id="head">Consultation Notes</div >
                <button id="chiefComplaintButton">Chief Complaint</button>
                <form method='post'>
                    {% csrf_token %}
                    
                    <div id="chiefComplaintArea" style="display: none;">
                        {% if chosenPatientConsulNotes %}
                            {% for chosenPatientConsulNotes_id, chosenPatientConsulNotes_data in chosenPatientConsulNotes.items %}
                                <textarea id="chiefComplaintText" rows="4" cols="50" placeholder="Enter chief complaint..." 
                                name="chiefComplaint">{{ chosenPatientConsulNotes_data.chiefComplaint }}</textarea>
                            {% endfor %}
                        {% else %}
                            <textarea id="chiefComplaintText" rows="4" cols="50" placeholder="Enter chief complaint..." 
                            name="chiefComplaint"></textarea>
                        {% endif %}
                        <button id="saveChiefComplaintButton" type="submit" name="complaintButton" value={{ chosenPatientData_id }} >Save</button>
                        <button id="cancelChiefComplaintButton">Cancel</button>
                    </div>
                </form>
                <div id="ros">
                    <button id="reviewOfSystemsButton">Review of Systems</button>
                    <div id="reviewOfSystemsModal" class="modal" style="display: none;">
                        <div class="modal-content">
                            <h2>Review of Systems</h2>
                            <form id="reviewOfSystemsForm" method='post' >
                                {% csrf_token %}
                                {% if chosenPatientConsulNotes %}
                                    {% for chosenPatientConsulNotes_id, chosenPatientConsulNotes_data in chosenPatientConsulNotes.items %}
                                        <div class="column">
                                            <p>Skin</p>
                                                <input type="checkbox" name="skin_conditions" value="Rashes" {% if 'Rashes' in chosenPatientConsulNotes_data.review_of_systems.skin %} checked {% endif %}><label>Rashes</label><br>
                                                <input type="checkbox" name="skin_conditions" value="Itching" {% if 'Itching' in chosenPatientConsulNotes_data.review_of_systems.skin %} checked {% endif %}><label>Itching</label><br>
                                                <input type="checkbox" name="skin_conditions" value="Change in Hair or Nails" {% if 'Change in Hair or Nails' in chosenPatientConsulNotes_data.review_of_systems.skin %} checked {% endif %}><label>Change in Hair or Nails</label><br>
                                            <p>Head</p>
                                                <input type="checkbox" name="head_conditions" value="Headaches" {% if 'Headaches' in chosenPatientConsulNotes_data.review_of_systems.head %} checked {% endif %}><label>Headaches</label><br>
                                                <input type="checkbox" name="head_conditions" value="Head Injury" {% if 'Head Injury' in chosenPatientConsulNotes_data.review_of_systems.head %} checked {% endif %}><label>Head Injury</label><br>
                                            <p>Eyes</p>
                                                <input type="checkbox" name="eye_conditions" value="Glasses or Contacts" {% if 'Glasses or Contacts' in chosenPatientConsulNotes_data.review_of_systems.eyes %} checked {% endif %}><label>Glasses or Contacts</label><br>
                                                <input type="checkbox" name="eye_conditions" value="Change in Vision" {% if 'Change in Vision' in chosenPatientConsulNotes_data.review_of_systems.eyes %} checked {% endif %}><label>Change in Vision</label><br>
                                                <input type="checkbox" name="eye_conditions" value="Eye Pain" {% if 'Eye Pain' in chosenPatientConsulNotes_data.review_of_systems.eyes %} checked {% endif %}><label>Eye Pain</label><br>
                                                <input type="checkbox" name="eye_conditions" value="Double Vision" {% if 'Double Vision' in chosenPatientConsulNotes_data.review_of_systems.eyes %} checked {% endif %}><label>Double Vision</label><br>
                                                <input type="checkbox" name="eye_conditions" value="Flashing Lights" {% if 'Flashing Lights' in chosenPatientConsulNotes_data.review_of_systems.eyes %} checked {% endif %}><label>Flashing Lights</label><br>
                                                <input type="checkbox" name="eye_conditions" value="Glaucoma/Cataracts" {% if 'Glaucoma/Cataracts' in chosenPatientConsulNotes_data.review_of_systems.eyes %} checked {% endif %}><label>Glaucoma/Cataracts</label><br>
                                            <p>Ears</p>
                                                <input type="checkbox" name="ear_conditions" value="Change in Hearing" {% if 'Change in Hearing' in chosenPatientConsulNotes_data.review_of_systems.ear %} checked {% endif %}><label>Change in Hearing</label><br>
                                                <input type="checkbox" name="ear_conditions" value="Ear Pain" {% if 'Ear Pain' in chosenPatientConsulNotes_data.review_of_systems.ear %} checked {% endif %}><label>Ear Pain</label><br>
                                                <input type="checkbox" name="ear_conditions" value="Ear Discharge" {% if 'Ear Discharge' in chosenPatientConsulNotes_data.review_of_systems.ear %} checked {% endif %}><label>Ear Discharge</label><br>
                                                <input type="checkbox" name="ear_conditions" value="Ringing" {% if 'Ringing' in chosenPatientConsulNotes_data.review_of_systems.ear %} checked {% endif %}><label>Ringing</label><br>
                                                <input type="checkbox" name="ear_conditions" value="Dizziness" {% if 'Dizziness' in chosenPatientConsulNotes_data.review_of_systems.ear %} checked {% endif %}><label>Dizziness</label><br>
                                            <p>Nose/Sinuses</p>
                                                <input type="checkbox" name="nose_conditions" value="Nose Bleeds" {% if 'Nose Bleeds' in chosenPatientConsulNotes_data.review_of_systems.nose %} checked {% endif %}><label>Nose Bleeds</label><br>
                                                <input type="checkbox" name="nose_conditions" value="Nasal Stuffiness" {% if 'Nasal Stuffiness' in chosenPatientConsulNotes_data.review_of_systems.nose %} checked {% endif %}><label>Nasal Stuffiness</label><br>
                                                <input type="checkbox" name="nose_conditions" value="Frequent Colds" {% if 'Frequent Colds' in chosenPatientConsulNotes_data.review_of_systems.nose %} checked {% endif %}><label>Frequent Colds</label><br>
                                            <p>Allergies</p>
                                                <input type="checkbox" name="allergy_conditions" value="Frequent Colds" {% if 'Frequent Colds' in chosenPatientConsulNotes_data.review_of_systems.allergy %} checked {% endif %}><label>Hives</label><br>
                                                <input type="checkbox" name="allergy_conditions" value="Swelling of Lips or Tongues" {% if 'Swelling of Lips or Tongues' in chosenPatientConsulNotes_data.review_of_systems.allergy %} checked {% endif %}><label>Swelling of Lips or Tongues</label><br>
                                                <input type="checkbox" name="allergy_conditions" value="Hay Fever" {% if 'Hay Fever' in chosenPatientConsulNotes_data.review_of_systems.allergy %} checked {% endif %}><label>Hay Fever</label><br>
                                                <input type="checkbox" name="allergy_conditions" value="Asthma" {% if 'Asthma' in chosenPatientConsulNotes_data.review_of_systems.allergy %} checked {% endif %}><label>Asthma</label><br>
                                                <input type="checkbox" name="allergy_conditions" value="Eczema/Sensitive" {% if 'Eczema/Sensitive' in chosenPatientConsulNotes_data.review_of_systems.allergy %} checked {% endif %}><label>Eczema/Sensitive</label><br>
                                            <p>Mouth/Throat</p>
                                                <input type="checkbox" name="mouth_conditions" value="Bleeding Gums" {% if 'Bleeding Gums' in chosenPatientConsulNotes_data.review_of_systems.mouth %} checked {% endif %}><label>Bleeding Gums</label><br>
                                                <input type="checkbox" name="mouth_conditions" value="Sore Tongue" {% if 'Sore Tongue' in chosenPatientConsulNotes_data.review_of_systems.mouth %} checked {% endif %}><label>Sore Tongue</label><br>
                                                <input type="checkbox" name="mouth_conditions" value="Sore Throat" {% if 'Sore Throat' in chosenPatientConsulNotes_data.review_of_systems.mouth %} checked {% endif %}><label>Sore Throat</label><br>
                                                <input type="checkbox" name="mouth_conditions" value="Hoarseness" {% if 'Hoarseness' in chosenPatientConsulNotes_data.review_of_systems.mouth %} checked {% endif %}><label>Hoarseness</label><br>
                                            <p>Neck</p>
                                                <input type="checkbox" name="neck_conditions" value="Lumps" {% if 'Lumps' in chosenPatientConsulNotes_data.review_of_systems.neck %} checked {% endif %}><label>Lumps</label><br>
                                                <input type="checkbox" name="neck_conditions" value="Swollen Glands" {% if 'Swollen Glands' in chosenPatientConsulNotes_data.review_of_systems.neck %} checked {% endif %}><label>Swollen Glands</label><br>
                                                <input type="checkbox" name="neck_conditions" value="Goiter" {% if 'Goiter' in chosenPatientConsulNotes_data.review_of_systems.neck %} checked {% endif %}><label>Goiter</label><br>
                                                <input type="checkbox" name="neck_conditions" value="Stiffness" {% if 'Stiffness' in chosenPatientConsulNotes_data.review_of_systems.neck %} checked {% endif %}><label>Stiffness</label><br>
                                            <p>Breast</p>
                                                <input type="checkbox" name="breast_conditions" value="Lumps" {% if 'Lumps' in chosenPatientConsulNotes_data.review_of_systems.breast %} checked {% endif %}><label>Lumps</label><br>
                                                <input type="checkbox" name="breast_conditions" value="Pain" {% if 'Pain' in chosenPatientConsulNotes_data.review_of_systems.breast %} checked {% endif %}><label>Pain</label><br>
                                                <input type="checkbox" name="breast_conditions" value="Nipple Discharge" {% if 'Nipple Discharge' in chosenPatientConsulNotes_data.review_of_systems.breast %} checked {% endif %}><label>Nipple Discharge</label><br>
                                                <input type="checkbox" name="breast_conditions" value="BSE" {% if 'BSE' in chosenPatientConsulNotes_data.review_of_systems.breast %} checked {% endif %}><label>BSE</label><br>
                                            <p>Respiratory/Cardiac</p>
                                                <input type="checkbox" name="cardiac_conditions" value="Shortness of Breath" {% if 'Shortness of Breath' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Shortness of Breath</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="Cough" {% if 'Cough' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Cough</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="Production of Phlegm" {% if 'Production of Phlegm' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Production of Phlegm</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="Wheezing" {% if 'Wheezing' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Wheezing</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="Coughing up Blood" {% if 'Coughing up Blood' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Coughing up Blood</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="Chest Pain" {% if 'Chest Pain' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Chest Pain</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="Fever" {% if 'Fever' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Fever</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="Night Sweats" {% if 'Night Sweats' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Night Sweats</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="BSE" {% if 'BSE' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Swelling in Hands/Feet</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="Swelling in Hands/Feet" {% if 'Swelling in Hands/Feet' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Blue Fingers/Toes</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="High Blood Pressure" {% if 'High Blood Pressure' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>High Blood Pressure</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="Heart Murmur" {% if 'Heart Murmur' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Heart Murmur</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="HX of Heart Medication" {% if 'HX of Heart Medication' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>HX of Heart Medication</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="Bronchities/Emphysema" {% if 'Bronchities/Emphysema' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Bronchities/Emphysema</label><br>
                                                <input type="checkbox" name="cardiac_conditions" value="Rheumatic Heart Disease" {% if 'Rheumatic Heart Disease' in chosenPatientConsulNotes_data.review_of_systems.cardiac %} checked {% endif %}><label>Rheumatic Heart Disease</label><br>
                                        </div>
                                        <div class="column">
                                            <p>Gastrointestinal</p>
                                                <input type="checkbox" name="gastro_conditions" value="Change in Appetite/Weight" {% if 'Change in Appetite/Weight' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Change in Appetite/Weight</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Problems Swallowing" {% if 'Problems Swallowing' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Problems Swallowing</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Nausea" {% if 'Nausea' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Nausea</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Heartburn" {% if 'Heartburn' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Heartburn</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Vomiting" {% if 'Vomiting' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Vomiting</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Vomiting Blood" {% if 'Vomiting Blood' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Vomiting Blood</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Constipation" {% if 'Constipation' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Constipation</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Diarrhea" {% if 'Diarrhea' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Diarrhea</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Change in Bowel Habits" {% if 'Change in Bowel Habits' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Change in Bowel Habits</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Abdominal Pain" {% if 'Abdominal Pain' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Abdominal Pain</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Excessive Belching" {% if 'Excessive Belching' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Excessive Belching</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Excessive Flatus" {% if 'Excessive Flatus' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Excessive Flatus</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Yellow color of Skin" {% if 'Yellow color of Skin' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Yellow color of Skin</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Food Intolerance" {% if 'Food Intolerance' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Food Intolerance</label><br>
                                                <input type="checkbox" name="gastro_conditions" value="Rectal Bleeding/Hemorrhoids" {% if 'Rectal Bleeding/Hemorrhoids' in chosenPatientConsulNotes_data.review_of_systems.gastro %} checked {% endif %}><label>Rectal Bleeding/Hemorrhoids</label><br>
                                            <p>Urinary</p>
                                                <input type="checkbox" name="urinary_conditions" value="Difficulty in Urinaition" {% if 'Difficulty in Urinaition' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Difficulty in Urinaition</label><br>
                                                <input type="checkbox" name="urinary_conditions" value="Pain or buring on urination" {% if 'Pain or buring on urination' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Pain or buring on urination</label><br>
                                                <input type="checkbox" name="urinary_conditions" value="Frequent urination at night" {% if 'Frequent urination at night' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Frequent urination at night</label><br>
                                                <input type="checkbox" name="urinary_conditions" value="Urgent need to urinate" {% if 'Urgent need to urinate' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Urgent need to urinate</label><br>
                                                <input type="checkbox" name="urinary_conditions" value="Incontinence of urine" {% if 'Incontinence of urine' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Incontinence of urine</label><br>
                                                <input type="checkbox" name="urinary_conditions" value="Dribbling" {% if 'Dribbling' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Dribbling</label><br>
                                                <input type="checkbox" name="urinary_conditions" value="Decreased urine stream" {% if 'Decreased urine stream' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Decreased urine stream</label><br>
                                                <input type="checkbox" name="urinary_conditions" value="Blood in urine" {% if 'Blood in urine' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>Blood in urine</label><br>
                                                <input type="checkbox" name="urinary_conditions" value="UTI/Stones/Prostate Infection" {% if 'UTI/Stones/Prostate Infection' in chosenPatientConsulNotes_data.review_of_systems.urinary %} checked {% endif %}><label>UTI/Stones/Prostate Infection</label><br>
                                        </div>
                                        <div class="column">
                                            <p>Peripheral Vascular</p>
                                                <input type="checkbox" name="pv_conditions" value="Leg cramps" {% if 'Leg cramps' in chosenPatientConsulNotes_data.review_of_systems.pv %} checked {% endif %}><label>Leg cramps</label><br>
                                                <input type="checkbox" name="pv_conditions" value="Varicose veins" {% if 'Varicose veins' in chosenPatientConsulNotes_data.review_of_systems.pv %} checked {% endif %}><label>Varicose veins</label><br>
                                                <input type="checkbox" name="pv_conditions" value="Clots in veins" {% if 'Clots in veins' in chosenPatientConsulNotes_data.review_of_systems.pv %} checked {% endif %}><label>Clots in veins</label><br>
                                            <p>Muscoskeletal</p>
                                                <input type="checkbox" name="ms_conditions" value="Pain" {% if 'Pain' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Pain</label><br>
                                                <input type="checkbox" name="ms_conditions" value="Swelling" {% if 'Swelling' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Swelling</label><br>
                                                <input type="checkbox" name="ms_conditions" value="Stiffness" {% if 'Stiffness' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Stiffness</label><br>
                                                <input type="checkbox" name="ms_conditions" value="Decrease joint motion" {% if 'Decrease joint motion' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Decrease joint motion</label><br>
                                                <input type="checkbox" name="ms_conditions" value="Broken bone" {% if 'Broken bone' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Broken bone</label><br>
                                                <input type="checkbox" name="ms_conditions" value="Serious sprains" {% if 'Serious sprains' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Serious sprains</label><br>
                                                <input type="checkbox" name="ms_conditions" value="Arthritis" {% if 'Arthritis' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Arthritis</label><br>
                                                <input type="checkbox" name="ms_conditions" value="Gout" {% if 'Gout' in chosenPatientConsulNotes_data.review_of_systems.ms %} checked {% endif %}><label>Gout</label><br>
                                            <p>Neurologic</p>
                                                <input type="checkbox" name="neuro_conditions" value="Headaches" {% if 'Headaches' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Headaches</label><br>
                                                <input type="checkbox" name="neuro_conditions" value="Seizures" {% if 'Seizures' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Seizures</label><br>
                                                <input type="checkbox" name="neuro_conditions" value="Loss of consciousness/Fainting" {% if 'Loss of consciousness/Fainting' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Loss of consciousness/Fainting</label><br>
                                                <input type="checkbox" name="neuro_conditions" value="Paralysis" {% if 'Paralysis' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Paralysis</label><br>
                                                <input type="checkbox" name="neuro_conditions" value="Weakness" {% if 'Weakness' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Weakness</label><br>
                                                <input type="checkbox" name="neuro_conditions" value="Loss of muscle size" {% if 'Loss of muscle size' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Loss of muscle size</label><br>
                                                <input type="checkbox" name="neuro_conditions" value="Muscle spasm" {% if 'Muscle spasm' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Muscle spasm</label><br>
                                                <input type="checkbox" name="neuro_conditions" value="Tremor" {% if 'Tremor' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Tremor</label><br>
                                                <input type="checkbox" name="neuro_conditions" value="Involuntary movement" {% if 'Involuntary movement' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Involuntary movement</label><br>
                                                <input type="checkbox" name="neuro_conditions" value="Incoordination" {% if 'Incoordination' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Incoordination</label><br>
                                                <input type="checkbox" name="neuro_conditions" value="Numbness" {% if 'Numbness' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Numbness</label><br>
                                                <input type="checkbox" name="neuro_conditions" value="Feeling of pins and needles" {% if 'Feeling of pins and needles' in chosenPatientConsulNotes_data.review_of_systems.neuro%} checked {% endif %}><label>Feeling of pins and needles</label><br>
                                            <p>Hematologic</p>
                                                <input type="checkbox" name="hema_conditions" value="Anemia" {% if 'Anemia' in chosenPatientConsulNotes_data.review_of_systems.hema%} checked {% endif %}><label>Anemia</label><br>
                                                <input type="checkbox" name="hema_conditions" value="Easy bruising/bleeding" {% if 'Easy bruising/bleeding' in chosenPatientConsulNotes_data.review_of_systems.hema%} checked {% endif %}><label>Easy bruising/bleeding</label><br>
                                                <input type="checkbox" name="hema_conditions" value="Past tranfusions" {% if 'Past tranfusions' in chosenPatientConsulNotes_data.review_of_systems.hema%} checked {% endif %}><label>Past tranfusions</label><br>
                                            <p>Endocrine</p>
                                                <input type="checkbox" name="endo_conditions" value="Abnormal Growth" {% if 'Abnormal Growth' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Abnormal Growth</label><br>
                                                <input type="checkbox" name="endo_conditions" value="Increased appetite" {% if 'Increased appetite' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Increased appetite</label><br>
                                                <input type="checkbox" name="endo_conditions" value="Increased thirst" {% if 'Increased thirst' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Increased thirst</label><br>
                                                <input type="checkbox" name="endo_conditions" value="Increase urine production" {% if 'Increase urine production' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Increase urine production</label><br>
                                                <input type="checkbox" name="endo_conditions" value="Thyroid trouble" {% if 'Past tranfusions' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Thyroid trouble</label><br>
                                                <input type="checkbox" name="endo_conditions" value="Heat/cold Intolerance" {% if 'Thyroid trouble' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Heat/cold Intolerance</label><br>
                                                <input type="checkbox" name="endo_conditions" value="Excessive Sweating" {% if 'Excessive Sweating' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Excessive Sweating</label><br>
                                                <input type="checkbox" name="endo_conditions" value="Diabetes" {% if 'Diabetes' in chosenPatientConsulNotes_data.review_of_systems.endo%} checked {% endif %}><label>Diabetes</label><br>
                                        </div>
                                    {% endfor %}
                                {% else %}
                                    <div class="column">
                                        <p>Skin</p>
                                        <input type="checkbox" name="skin_conditions" value="Rashes"><label>Rashes</label><br>
                                        <input type="checkbox" name="skin_conditions" value="Itching"><label>Itching</label><br>
                                        <input type="checkbox" name="skin_conditions" value="Change in Hair or Nails"><label>Change in Hair or Nails</label><br>
                                        <p>Head</p>
                                        <input type="checkbox" name="head_conditions" value="Headaches"><label>Headaches</label><br>
                                        <input type="checkbox" name="head_conditions" value="Head Injury"><label>Head Injury</label><br>
                                        <p>Eyes</p>
                                        <input type="checkbox" name="eye_conditions" value="Glasses or Contacts"><label>Glasses or Contacts</label><br>
                                        <input type="checkbox" name="eye_conditions" value="Change in Vision"><label>Change in Vision</label><br>
                                        <input type="checkbox" name="eye_conditions" value="Eye Pain"><label>Eye Pain</label><br>
                                        <input type="checkbox" name="eye_conditions" value="Double Vision"><label>Double Vision</label><br>
                                        <input type="checkbox" name="eye_conditions" value="Flashing Lights"><label>Flashing Lights</label><br>
                                        <input type="checkbox" name="eye_conditions" value="Glaucoma/Cataracts"><label>Glaucoma/Cataracts</label><br>
                                        <p>Ears</p>
                                        <input type="checkbox" name="ear_conditions" value="Change in Hearing"><label>Change in Hearing</label><br>
                                        <input type="checkbox" name="ear_conditions" value="Ear Pain"><label>Ear Pain</label><br>
                                        <input type="checkbox" name="ear_conditions" value="Ear Discharge"><label>Ear Discharge</label><br>
                                        <input type="checkbox" name="ear_conditions" value="Ringing"><label>Ringing</label><br>
                                        <input type="checkbox" name="ear_conditions" value="Dizziness"><label>Dizziness</label><br>
                                        <p>Nose/Sinuses</p>
                                        <input type="checkbox" name="nose_conditions" value="Nose Bleeds"><label>Nose Bleeds</label><br>
                                        <input type="checkbox" name="nose_conditions" value="Nasal Stuffiness"><label>Nasal Stuffiness</label><br>
                                        <input type="checkbox" name="nose_conditions" value="Frequent Colds"><label>Frequent Colds</label><br>
                                        <p>Allergies</p>
                                        <input type="checkbox" name="allergy_conditions" value="Frequent Colds"><label>Hives</label><br>
                                        <input type="checkbox" name="allergy_conditions" value="Swelling of Lips or Tongues"><label>Swelling of Lips or Tongues</label><br>
                                        <input type="checkbox" name="allergy_conditions" value="Hay Fever"><label>Hay Fever</label><br>
                                        <input type="checkbox" name="allergy_conditions" value="Asthma"><label>Asthma</label><br>
                                        <input type="checkbox" name="allergy_conditions" value="Eczema/Sensitive"><label>Eczema/Sensitive</label><br>
                                        <p>Mouth/Throat</p>
                                        <input type="checkbox" name="mouth_conditions" value="Bleeding Gums"><label>Bleeding Gums</label><br>
                                        <input type="checkbox" name="mouth_conditions" value="Sore Tongue"><label>Sore Tongue</label><br>
                                        <input type="checkbox" name="mouth_conditions" value="Sore Throat"><label>Sore Throat</label><br>
                                        <input type="checkbox" name="mouth_conditions" value="Hoarseness"><label>Hoarseness</label><br>
                                        <p>Neck</p>
                                        <input type="checkbox" name="neck_conditions" value="Lumps"><label>Lumps</label><br>
                                        <input type="checkbox" name="neck_conditions" value="Swollen Glands"><label>Swollen Glands</label><br>
                                        <input type="checkbox" name="neck_conditions" value="Goiter"><label>Goiter</label><br>
                                        <input type="checkbox" name="neck_conditions" value="Stiffness"><label>Stiffness</label><br>
                                        <p>Breast</p>
                                        <input type="checkbox" name="breast_conditions" value="Lumps"><label>Lumps</label><br>
                                        <input type="checkbox" name="breast_conditions" value="Pain"><label>Pain</label><br>
                                        <input type="checkbox" name="breast_conditions" value="Nipple Discharge"><label>Nipple Discharge</label><br>
                                        <input type="checkbox" name="breast_conditions" value="BSE"><label>BSE</label><br>
                                        <p>Respiratory/Cardiac</p>
                                        <input type="checkbox" name="cardiac_conditions" value="Shortness of Breath"><label>Shortness of Breath</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="Cough"><label>Cough</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="Production of Phlegm"><label>Production of Phlegm</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="Wheezing"><label>Wheezing</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="Coughing up Blood"><label>Coughing up Blood</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="Chest Pain"><label>Chest Pain</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="Fever"><label>Fever</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="Night Sweats"><label>Night Sweats</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="BSE"><label>Swelling in Hands/Feet</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="Swelling in Hands/Feet"><label>Blue Fingers/Toes</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="High Blood Pressure"><label>High Blood Pressure</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="Heart Murmur"><label>Heart Murmur</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="HX of Heart Medication"><label>HX of Heart Medication</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="Bronchities/Emphysema"><label>Bronchities/Emphysema</label><br>
                                        <input type="checkbox" name="cardiac_conditions" value="Rheumatic Heart Disease"><label>Rheumatic Heart Disease</label><br>
                                    </div>
                                    <div class="column">
                                        <p>Gastrointestinal</p>
                                        <input type="checkbox" name="gastro_conditions" value="Change in Appetite/Weight"><label>Change in Appetite/Weight</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Problems Swallowing"><label>Problems Swallowing</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Nausea"><label>Nausea</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Heartburn"><label>Heartburn</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Vomiting"><label>Vomiting</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Vomiting Blood"><label>Vomiting Blood</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Constipation"><label>Constipation</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Diarrhea"><label>Diarrhea</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Change in Bowel Habits"><label>Change in Bowel Habits</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Abdominal Pain"><label>Abdominal Pain</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Excessive Belching"><label>Excessive Belching</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Excessive Flatus"><label>Excessive Flatus</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Yellow color of Skin"><label>Yellow color of Skin</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Food Intolerance"><label>Food Intolerance</label><br>
                                        <input type="checkbox" name="gastro_conditions" value="Rectal Bleeding/Hemorrhoids"><label>Rectal Bleeding/Hemorrhoids</label><br>
                                        <p>Urinary</p>
                                        <input type="checkbox" name="urinary_conditions" value="Difficulty in Urinaition"><label>Difficulty in Urinaition</label><br>
                                        <input type="checkbox" name="urinary_conditions" value="Pain or buring on urination"><label>Pain or buring on urination</label><br>
                                        <input type="checkbox" name="urinary_conditions" value="Frequent urination at night"><label>Frequent urination at night</label><br>
                                        <input type="checkbox" name="urinary_conditions" value="Urgent need to urinate"><label>Urgent need to urinate</label><br>
                                        <input type="checkbox" name="urinary_conditions" value="Incontinence of urine"><label>Incontinence of urine</label><br>
                                        <input type="checkbox" name="urinary_conditions" value="Dribbling"><label>Dribbling</label><br>
                                        <input type="checkbox" name="urinary_conditions" value="Decreased urine stream"><label>Decreased urine stream</label><br>
                                        <input type="checkbox" name="urinary_conditions" value="Blood in urine"><label>Blood in urine</label><br>
                                        <input type="checkbox" name="urinary_conditions" value="UTI/Stones/Prostate Infection"><label>UTI/Stones/Prostate Infection</label><br>
                                    </div>
                                    <div class="column">
                                        <p>Peripheral Vascular</p>
                                        <input type="checkbox" name="pv_conditions" value="Leg cramps"><label>Leg cramps</label><br>
                                        <input type="checkbox" name="pv_conditions" value="Varicose veins"><label>Varicose veins</label><br>
                                        <input type="checkbox" name="pv_conditions" value="Clots in veins"><label>Clots in veins</label><br>
                                        <p>Muscoskeletal</p>
                                        <input type="checkbox" name="ms_conditions" value="Pain"><label>Pain</label><br>
                                        <input type="checkbox" name="ms_conditions" value="Swelling"><label>Swelling</label><br>
                                        <input type="checkbox" name="ms_conditions" value="Stiffness"><label>Stiffness</label><br>
                                        <input type="checkbox" name="ms_conditions" value="Decrease joint motion"><label>Decrease joint motion</label><br>
                                        <input type="checkbox" name="ms_conditions" value="Broken bone"><label>Broken bone</label><br>
                                        <input type="checkbox" name="ms_conditions" value="Serious sprains"><label>Serious sprains</label><br>
                                        <input type="checkbox" name="ms_conditions" value="Arthritis"><label>Arthritis</label><br>
                                        <input type="checkbox" name="ms_conditions" value="Gout"><label>Gout</label><br>
                                        <p>Neurologic</p>
                                        <input type="checkbox" name="neuro_conditions" value="Headaches"><label>Headaches</label><br>
                                        <input type="checkbox" name="neuro_conditions" value="Seizures"><label>Seizures</label><br>
                                        <input type="checkbox" name="neuro_conditions" value="Loss of consciousness/Fainting"><label>Loss of consciousness/Fainting</label><br>
                                        <input type="checkbox" name="neuro_conditions" value="Paralysis"><label>Paralysis</label><br>
                                        <input type="checkbox" name="neuro_conditions" value="Weakness"><label>Weakness</label><br>
                                        <input type="checkbox" name="neuro_conditions" value="Loss of muscle size"><label>Loss of muscle size</label><br>
                                        <input type="checkbox" name="neuro_conditions" value="Muscle spasm"><label>Muscle spasm</label><br>
                                        <input type="checkbox" name="neuro_conditions" value="Tremor"><label>Tremor</label><br>
                                        <input type="checkbox" name="neuro_conditions" value="Involuntary movement"><label>Involuntary movement</label><br>
                                        <input type="checkbox" name="neuro_conditions" value="Incoordination"><label>Incoordination</label><br>
                                        <input type="checkbox" name="neuro_conditions" value="Numbness"><label>Numbness</label><br>
                                        <input type="checkbox" name="neuro_conditions" value="Feeling of pins and needles"><label>Feeling of pins and needles</label><br>
                                        <p>Hematologic</p>
                                        <input type="checkbox" name="hema_conditions" value="Anemia"><label>Anemia</label><br>
                                        <input type="checkbox" name="hema_conditions" value="Easy bruising/bleeding"><label>Easy bruising/bleeding</label><br>
                                        <input type="checkbox" name="hema_conditions" value="Past tranfusions"><label>Past tranfusions</label><br>
                                        <p>Endocrine</p>
                                        <input type="checkbox" name="endo_conditions" value="Abnormal Growth"><label>Abnormal Growth</label><br>
                                        <input type="checkbox" name="endo_conditions" value="Increased appetite"><label>Increased appetite</label><br>
                                        <input type="checkbox" name="endo_conditions" value="Increased thirst"><label>Increased thirst</label><br>
                                        <input type="checkbox" name="endo_conditions" value="Increase urine production"><label>Increase urine production</label><br>
                                        <input type="checkbox" name="endo_conditions" value="Thyroid trouble"><label>Thyroid trouble</label><br>
                                        <input type="checkbox" name="endo_conditions" value="Heat/cold Intolerance"><label>Heat/cold Intolerance</label><br>
                                        <input type="checkbox" name="endo_conditions" value="Excessive Sweating"><label>Excessive Sweating</label><br>
                                        <input type="checkbox" name="endo_conditions" value="Diabetes"><label>Diabetes</label><br>
                                    </div>
                                {% endif %}
                                <button type="submit" name="rosButton" value={{ chosenPatientData_id }}>Save</button>
                            </form>
                            <button id="closeModalButton">Close</button>
                        </div>
                    </div>
                </div>

                <div id="diagnosisButton">
                    <button onclick="toggleDropdown()">Diagnosis</button>
                    <form id="diagnosis" method='post'>
                        {% csrf_token %}
                    <div id="diagnosisDropdown" class="dropdown-content" style="display: none;">
                        <select id="health-conditions" name="diagnosis">
                            <option value="">Select a condition...</option>
                            <option value="Hypertension">Hypertension</option>
                            <option value="Urinary Tract Infection">Urinary Tract Infection</option>
                            <option value="Diabetes Mellitus Type 2">Diabetes Mellitus Type 2</option>
                            <option value="Lower Respiratory Tract Infection">Lower Respiratory Tract Infection</option>
                            <option value="Community Acquired Pneumonia">Community Acquired Pneumonia</option>
                            <option value="Pulmonary Tuberculosis">Pulmonary Tuberculosis</option>
                            <option value="Musculoskeletal Disease">Musculoskeletal Disease</option>
                            <option value="Ischemic Heart Disease">Ischemic Heart Disease</option>
                            <option value="Upper Respiratory Tract Infection">Upper Respiratory Tract Infection</option>
                            <option value="Cerebrovascular Disease">Cerebrovascular Disease</option>
                            <option value="Others">Others</option>
                        </select>
                        <div id="otherDiagnosis" style="display: none;">
                            <input type="text" name="otherDiagnosis"></input>
                        </div>
                        
                        <button type="submit" name="diagnosisButton" value={{ chosenPatientData_id }}>Save</button>
                    </div>
                    </form>
                    {% if chosenPatientConsulNotes %}
                        {% for chosenPatientConsulNotes_id, chosenPatientConsulNotes_data in chosenPatientConsulNotes.items %}
                            {% if chosenPatientConsulNotes_data.diagnosis %}
                                <p>Diagnosis: {{ chosenPatientConsulNotes_data.diagnosis }}</p>
                            {% else %} 
                                <p>Diagnosis: No Current Diagnosis</p>
                            {% endif %} 
                        {% endfor %}   
                    {% else %} 
                        <p>Diagnosis: No Current Diagnosis</p>
                    {% endif %}   
            </div>
            {% endfor %}
        </div>
        
        <div id = "diagnostic-tests-container">
            {% for chosenPatientData_id, chosenPatientData_data in chosenPatientData.items %}
            <div id = "diagnostic-tests">
                <div id = "head">Dianostic Tests</div>
                    <button><a href = "{% url 'diagnostic_lab_reports' %}">View Lab Reports</a></button>
                    <div id="biometric-info" style="display: none;">
                    </div>
                    <button><a href = "{% url 'diagnostic_imagery_reports' %}">View Imagery Results</a></button>
                    <div id="contact-details" style="display: none;">
                    </div>
                    <button id="requestLabTestButton">Request New Lab Test</button>

                    <div id="newLabTestModal" class="modal1" style="display: none;">
                        <div class="modal-content">
                            <h2>Request New Lab Test</h2>
                            <form method="post" id="newLabTestForm">
                                {% csrf_token %}
                                <input type="checkbox" id="bloodTestCheckbox" name="bloodTestCheckbox">
                                <label for="bloodTestCheckbox">Blood Test</label><br>
                                <input type="checkbox" id="chestXrayCheckbox" name="chestXrayCheckbox">
                                <label for="chestXrayCheckbox">Chest X-ray</label><br>
                                <input type="checkbox" id="urineTestCheckbox" name="urineTestCheckbox">
                                <label for="urineTestCheckbox">Urine Test</label><br>
                                <button type="submit" name="submitLabTestRequest">Submit</button>
                                <button id="closeModal">Cancel</button>
                            </form>
                            
                        </div>
                    </div>
                    
                    </div>
                </div>
            {% endfor %}
        </div>

        </div>
    </div>
</div>

<div id="inpatientModal1" class="modal1" style="display: none;">
    <div class="modal-content1">
        <h2>Discharge Instruction Form</h2>
        <form id="dischargeForm1" method="post">
            {% csrf_token %}
            {% comment %} <label for="instructions1">Instructions:</label><br>
            <textarea id="instructions1" name="instructions1" rows="4" cols="50"></textarea><br> {% endcomment %}
            
            <div id="prescriptionsContainer1" class="prescriptions-container">
                <div class="prescription-row1 header">
                    <div class="cell">Select</div>
                    <div class="cell">Medicine Name</div>
                    <div class="cell">Dosage</div>
                    <div class="cell">Route</div>
                    <div class="cell">Frequency</div>
                    <div class="cell">Remarks</div>
                </div>
                <div class="prescription-row1">
                    
                    <div class="cell"><input type="checkbox" name="selectMedicine[]" class="selectMedicine" /></div>
                    <div class="cell">
                        <input type="text" name="medicineName1" id="medicine_name_input" placeholder="Enter Medicine Name" list="medicine_name_suggestions">
                        <datalist id="medicine_name_suggestions">
                            {% for medicine in medicines_list %}
                                <option value="{{ medicine }}">
                            {% endfor %}
                        </datalist>
                    </div>
                    <div class="cell"><input type="text" name="dosage1" /></div>
                    <div class="cell"><select class="route-dropdown" name="route1">
                        <option value="" selected disabled>Select Route</option>
                        <option value="Oral">Oral</option>
                        <option value="Injection">Injection</option>
                        <option value="Topical">Topical</option>
                    </select></div>
                    <div class="cell"><select class="frequency-dropdown" name="frequency1">
                        <option value="" selected disabled>Select Frequency</option>
                        <option value="Once Daily">Once Daily</option>
                        <option value="Twice Daily">Twice Daily</option>
                        <option value="Thrice Daily">Thrice Daily</option>
                    </select></div>
                    <div class="cell"><input type="text" name="remarks1" /></div>
                </div>
            </div>
            
            <button type="button" id="addMedicine1">Add Medicine</button><br>
            
            <button type="button" id="removeSelectedRows">Remove Selected Rows</button><br>
            
            <button type="submit" id="addDischargePrescription" name="addDischargePrescription">Submit</button>
            <button type="button" id="closeInpatientModal1">Close</button>
        </form>
    </div>
</div>

<script src="{% static 'js/patient_data.js' %}"></script>
<script>
    var healthConditions = document.getElementById("health-conditions");
    var otherDiagnosis = document.getElementById("otherDiagnosis");

    healthConditions.addEventListener("change", function() {
        if (this.value === "Others") {
            otherDiagnosis.style.display = "block";
        } else {
            otherDiagnosis.style.display = "none";
        }
    });
    
    // Get the button and modal
    var reviewOfSystemsButton = document.getElementById("reviewOfSystemsButton");
    var reviewOfSystemsModal = document.getElementById("reviewOfSystemsModal");
    var closeModalButton = document.getElementById("closeModalButton");

    // When the user clicks the button, open the modal and position it
    reviewOfSystemsButton.onclick = function() {
        reviewOfSystemsModal.style.display = "block";
        reviewOfSystemsModal.style.position = "fixed"; // Set modal position to fixed
        reviewOfSystemsModal.style.top = "50%"; // Center vertically
        reviewOfSystemsModal.style.left = "50%"; // Center horizontally
        reviewOfSystemsModal.style.transform = "translate(-50%, -50%)"; // Center the modal
    }

    // When the user clicks on the close button, close the modal
    closeModalButton.onclick = function() {
        reviewOfSystemsModal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == reviewOfSystemsModal) {
            reviewOfSystemsModal.style.display = "none";
        }
    }

    // Get the button and modal for lab test request
    var requestLabTestButton = document.getElementById("requestLabTestButton");
    var newLabTestModal = document.getElementById("newLabTestModal");

    requestLabTestButton.onclick = function() {
        newLabTestModal.style.display = "block";
        newLabTestModal.style.position = "fixed"; 
        newLabTestModal.style.top = "50%";
        newLabTestModal.style.left = "50%";
        newLabTestModal.style.transform = "translate(-50%, -50%)";
    }

    // Get the close button inside the modal
    var closeModalButton = document.getElementById("closeModal");

    // When the user clicks on the close button, close the modal
    closeModalButton.onclick = function() {
        // Get the modal element
        var reviewOfSystemsModal = document.getElementById("reviewOfSystemsModal");
        // Hide the modal
        reviewOfSystemsModal.style.display = "none";
    }

    var endTransactionButton = document.getElementById("endtransaction");
    var toggleSwitch = document.getElementById("patientTypeToggle");

    endTransactionButton.addEventListener("click", function() {
        var confirmEnd;
        var patientStatus = toggleSwitch.checked ? "Inpatient" : "Outpatient";

        if (patientStatus === "Inpatient") {
            // Display a modal for Inpatient
            var modal = document.getElementById("inpatientModal1");
            modal.style.display = "block";
        } else {
            // Show an alert for Outpatient
            confirmEnd = confirm("Are you sure you want to end the appointment?");
            if (confirmEnd) {
                window.location.href = "{% url 'patient_data_doctor_view' %}";
            }
        }
    });
    var closeInpatientModalButton = document.getElementById("closeInpatientModal1");
    var inpatientModal = document.getElementById("inpatientModal1");

    closeInpatientModalButton.addEventListener("click", function() {
        inpatientModal.style.display = "none";
    });
    document.addEventListener("DOMContentLoaded", function() {
        const addMedicineButton = document.getElementById("addMedicine1");
        const removeSelectedRowsButton = document.getElementById("removeSelectedRows");
        const closeInpatientModalButton = document.getElementById("closeInpatientModal1");
        
        addMedicineButton.addEventListener('click', function() {
            addMedicineRow();
        });
        
        removeSelectedRowsButton.addEventListener('click', function() {
            removeSelectedRows();
        });
        
        closeInpatientModalButton.addEventListener('click', function() {
            document.getElementById("inpatientModal1").style.display = "none";
        });
    });
    

    function addMedicineRow() {
        const prescriptionsContainer = document.getElementById("prescriptionsContainer1");
        const newRow = document.createElement("div");
        newRow.classList.add("prescription-row1");
    
        newRow.innerHTML = `
            <div class="cell"><input type="checkbox" name="selectMedicine[]" class="selectMedicine" /></div>
            <div class="cell"><input type="text" name="medicineName1" id="medicine_name_input" placeholder="Enter Medicine Name" list="medicine_name_suggestions">
                <datalist id="medicine_name_suggestions">
                    {% for medicine in medicines_list %}
                        <option value="{{ medicine }}">
                    {% endfor %}
                </datalist></div>
            <div class="cell"><input type="text" name="dosage1" /></div>
            <div class="cell"><select class="route-dropdown" name="route1">
                <option value="" selected disabled>Select Route</option>
                <option value="Oral">Oral</option>
                <option value="Injection">Injection</option>
                <option value="Topical">Topical</option>
            </select></div>
            <div class="cell"><select class="frequency-dropdown" name="frequency1">
                <option value="" selected disabled>Select Frequency</option>
                <option value="Once Daily">Once Daily</option>
                <option value="Twice Daily">Twice Daily</option>
                <option value="Thrice Daily">Thrice Daily</option>
            </select></div>
            <div class="cell"><input type="text" name="remarks1" /></div>
        `;
    
        prescriptionsContainer.appendChild(newRow);
    }
    
    function removeSelectedRows() {
        const selectedCheckboxes = document.querySelectorAll('.selectMedicine:checked');
        selectedCheckboxes.forEach(function(checkbox) {
            checkbox.closest('.prescription-row1').remove();
        });
    }

    document.getElementById('medicineName1').addEventListener('input', function() {
        var query = this.value;
        var suggestions = Array.from(document.getElementById('medicine_name_suggestions').options)
            .map(option => option.value)
            .filter(medicine => medicine.toLowerCase().includes(query.toLowerCase()));
    
        displayAutocompleteSuggestions(suggestions);
    });
    
    // Function to display autocomplete suggestions
    function displayAutocompleteSuggestions(suggestions) {
        var dropdown = document.getElementById('medicine_name_suggestions');
        dropdown.innerHTML = ''; // Clear previous suggestions
    
        suggestions.forEach(function(suggestion) {
            var option = document.createElement('option');
            option.value = suggestion;
            dropdown.appendChild(option);
        });
    }

</script>



{% endblock %}