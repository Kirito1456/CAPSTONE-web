{% extends 'hmis/base.html' %}
{%load static%}
{% block title %}Appointment{% endblock %}

{% block styles%} 
<!-- Stylesheet for the program -->
<link rel="stylesheet" href="{% static 'css/style-appointmentss.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

{% endblock styles%}

{% block content %}
<div id = "whole-screen">
    <div id = "side-menu" style="background-color: #334a7c;">
        <div id = "all-info">
            <div id = "user-info"> 
                <div id = "image">
                    <img src="{% static 'logo-color.png' %}" id = "display-photo">
                </div>
                <div id = "information">
                    {% for doctor_id, doctor_data in doctors.items %}
                        {% if doctor_data.uid == uid %}
                            <div id="name" style="font-size: 22px;"> {{ doctor_data.fname }} {{ doctor_data.lname }}</div>
                            <div id="role" style="font-size: 16px;"> {{ doctor_data.specialization}}</div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            <div id="menu"> 
                <div id="a1"><i class="fas fa-tachometer-alt"></i> <a href="{% url 'DoctorDashboard' %}">Dashboard</a></div>
                <div id="a2" style="font-weight: bold;"> <i class="far fa-calendar-alt"></i> <a href="{% url 'AppointmentUpcoming' %}">Appointments</a></div>
                <div id="a3"><i class="fas fa-user"></i> <a href="{% url 'patient_data_doctor_view' %}">Patients</a></div>
                
                <div id="a4"><i class="fas fa-sign-out-alt"></i> <a href="{% url 'logout' %}"> Logout</a></div>
            </div>
        </div>
    </div>
    <div id = "appointment-screen">
        <div class="apt-header-btns">
            <div class="apt-header-left">
                <div id = "apt-btn"><a href="AppointmentCalendar.html">Calendar</a></div>
                <div id = "apt-btn"><a href="AppointmentUpcoming.html">Upcoming</a></div>
                <div id = "apt-btn" style="font-weight: bold;"><a href="AppointmentPast.html">Past</a></div>
                <div id="apt-btn"><a href="AppointmentScheduling.html">Schedule</a></div>
            </div>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search...">
                <button id="searchButton">Search</button>
            </div>
        </div>
        <table class="clients_table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Name</th>
                    <th>Visit Type</th>
                    <th>Details</th>
                </tr>
            </thead>
            <tbody>
                {% if appointments %}
                {% for appointment_id, appointment_data in appointments.items %}
                <tr>
                    <td><label id="accountT_date" class="accountT_lbl">{{ appointment_data.appointmentDate }}</label></td>
                    <td><label id="accountT_time" class="accountT_lbl">{{ appointment_data.appointmentTime }}</label></td>
                    {% for patient_id, patient_data in patients.items %}
                        {% if patient_data.uid == appointment_data.patientName %}
                            <td><label id="accountT_fullname" class="accountT_lbl">{{ patient_data.lname }}, {{ patient_data.fname }}</label></td>
                        {% endif %}
                    {% endfor %}
                    <td><label id="accountT_visittype" class="accountT_lbl">{{ appointment_data.appointmentVisitType }}</label></td> 
                    <td><label id="accountT_details" class="accountT_lbl"><a href="#" class="details-link">Click for More Details</a></label>
                        {% for patient_id, patient_data in patients.items %}
                            {% if patient_data.uid == appointment_data.patientName %}
                                <div class="details-container" style="display: none;">
                                    <div class="detail-wrapper">
                                        <div class="detailname" style="font-weight: bold;">E-mail: </div>
                                        <div class="detailvalue">{{ patient_data.email }}</div>
                                    </div>
                                    <div class="detail-wrapper">
                                        <div class="detailname" style="font-weight: bold;">Phone Number: </div>
                                        <div class="detailvalue">{{ patient_data.cnumber }}</div>
                                    </div>
                                    <div class="detail-wrapper">
                                        <div class="detailname" style="font-weight: bold;">Location: </div>
                                        <div class="detailvalue">{{ patient_data.address}}</div>
                                    </div>
                                </div>
                        {% endif %}
                    {% endfor %}
                    </td>
                </tr>
                {% endfor %}
                {% else %}
            <td colspan="5">No past appointments!</td>
            {% endif %}
            </tbody>
        </table>
    </div>
</div>

<script src="{% static 'js/appointment.js' %}"></script>
{% endblock %}